(self["webpackChunkwildfire"]=self["webpackChunkwildfire"]||[]).push([[4605],{74855:function(t,e,i){"use strict";i.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("span",{ref:"me"},[e("input",{staticClass:"inputDefaultClass",class:{titleSize:t.isTitle,mediumSize:t.isMedium,smallSize:t.isSmall,miniSize:t.isMini,fieldValue:!0,fieldControl:!0,warningBorder:t.isInvalid},attrs:{type:"text",placeholder:t.inputPlaceHolder},domProps:{value:t.valueText},on:{change:t.changeEvent}}),e("el-input",{staticStyle:{position:"fixed",width:"2000px",transform:"translateY(-9999px)"},attrs:{size:t.fontSize,readonly:""}},[e("span",{ref:"autowidthspan",class:{titleSize:t.isTitle},attrs:{slot:"prefix"},slot:"prefix"},[t._v(t._s(t.autowidthspanText))])])],1)},a=[],n=i(794),r={name:"EditLabel",model:{prop:"value",event:"input"},props:{value:{type:String},inputPlaceHolder:{String:String},isInvalid:{type:Boolean,default:!1},fontSize:{type:String,default:"medium"},autoWidth:{type:Boolean,default:!0}},data(){return{valueText:""}},watch:{value(t){this.valueText=t,this.$emit("change",t),this.autoWidthAdjust()}},created(){this.valueText=this.value},mounted(){this.autoWidthAdjust()},methods:{changeEvent(t){this.valueText=t.target.value,this.$emit("input",t.target.value),this.$emit("change",t.target.value),this.autoWidthAdjust()},autoWidthAdjust(t){this.autoWidth&&(n.Z.utils.Ignore(t),setTimeout((()=>{if(this.$refs.autowidthspan){var t=this.$refs.autowidthspan.getClientRects(),e=this.$refs.me,i=e.getElementsByClassName("inputDefaultClass")[0];if(t.length>0){var s=t[0].width+12;n.Z.utils.IsEmptyStr(this.inputPrefixIcon)||(s+=25),n.Z.utils.IsEmptyStr(this.inputSuffixIcon)||(s+=25),i.style.width=s+"px"}}}),10))}},computed:{autowidthspanText:function(){return this.valueText&&this.valueText.length>0?this.valueText:this.inputPlaceHolder},isMedium(){return"medium"==n.Z.utils.UnifiedElementFontSize(this.fontSize)},isSmall(){return"small"==n.Z.utils.UnifiedElementFontSize(this.fontSize)},isMini(){return"mini"==n.Z.utils.UnifiedElementFontSize(this.fontSize)},isTitle(){return"title"==this.fontSize}}},o=r,l=i(1001),u=(0,l.Z)(o,s,a,!1,null,"4dd8e01e",null),c=u.exports},13550:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return w}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"root"},[e("div",{staticClass:"containerClass"},[e("div",{staticClass:"top_toolbar h40"},[e("div",[t.name?e("EditLabel",{staticClass:"h40 ml10",attrs:{fontSize:"title"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}):e("span",{staticClass:"title h40 ml10 nonuserselect"},[t._v(t._s(t.$t("message.分布分析")))])],1),e("div",{staticClass:"top_toolbar_erea"},[e("div",[e("span",{staticClass:"size12 nonuserselect"},[t._v(t._s(t.$t("message.选择分析主体")+":")+" ")]),e("el-select",{staticClass:"mr10 w120",attrs:{size:"mini",placeholder:t.$t("message.选择分析主体")},model:{value:t.EntityId,callback:function(e){t.EntityId=e},expression:"EntityId"}},t._l(t.EntityList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-select",{staticClass:"mr10 w100",attrs:{size:"mini",placeholder:t.$t("message.请选择默认分析时区")},model:{value:t.zone,callback:function(e){t.zone=e},expression:"zone"}},t._l(t.zones,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),e("div",{staticClass:"ml10 w100 h30"},[e("b-button",{attrs:{type:"is-primary",size:"is-small",expanded:""},on:{click:function(e){return t.on_click_save(t.id)}}},[t._v(t._s(t.$t("message.保存")))]),e("SaveAnalysis",{ref:"saveAnalysis",on:{sucess:t.on_save_success}})],1),t.id>0?e("div",{staticClass:"ml10 w100 h30"},[e("b-button",{attrs:{type:"is-primary",size:"is-small",expanded:""},on:{click:function(e){return t.on_click_save(0)}}},[t._v(t._s(t.$t("message.另存为")))])],1):t._e(),e("div",{staticClass:"ml10 w100 h30"},[e("b-button",{attrs:{type:"is-primary",size:"is-small",expanded:""},on:{click:t.on_click_analyze}},[t._v(t._s(t.$t("message.计算")))])],1)],1)]),e("splitpanes",{staticClass:"default-theme"},[e("pane",{attrs:{size:t.paneSize,"max-size":"60"}},[e("div",{staticClass:"left-root"},[e("div",{staticClass:"left-work-area onSliderScroll"},[e("div",{staticClass:"title_area"},[e("div",{staticClass:"rowLeftCenter nonuserselect"},[t._v(t._s(t.$t("message.指标")))]),e("div",{staticClass:"title_area_button"})]),e("div",[e("div",{staticClass:"ml20"},[e("el-select",{staticClass:"mr10",attrs:{size:"mini",filterable:"","default-first-option":!0,placeholder:t.$t("message.请选择")},on:{change:function(e){return t.on_change_event(t.StartEvent)}},model:{value:t.StartEvent.event,callback:function(e){t.$set(t.StartEvent,"event",e)},expression:"StartEvent.event"}},t._l(t.EventList,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),t._v(t._s(t.$t("message.的"))+" "),t.StartEvent.loadingOk?e("EventMetric",{attrs:{extra:t.StartEvent,eventProps:t.StartEvent.eventProps,premetrics:t.distributeMetrics,entities:[]},on:{change:t.on_change_metric},model:{value:t.StartEvent.metric,callback:function(e){t.$set(t.StartEvent,"metric",e)},expression:"StartEvent.metric"}}):t._e(),t.StartEvent.loadingOk?e("ConfigNumSection",{staticClass:"ml5",model:{value:t.distriSet.distriParam,callback:function(e){t.$set(t.distriSet,"distriParam",e)},expression:"distriSet.distriParam"}}):t._e(),e("span",{on:{click:function(e){return t.addTopEventPropCondition(t.StartEvent.combo)}}},[e("el-tooltip",{attrs:{effect:"light",placement:"top",content:t.$t("message.添加筛选")}},[e("b-icon",{staticClass:"iconClass",attrs:{icon:"filter-plus-outline",size:"is-small"}})],1)],1),t.StartEvent.loadingOk?e("PropConditionGroup",{attrs:{eventProps:t.StartEvent.eventProps,keepLast:!1,userProps:t.UserPropList,userGroups:t.UserGroupList,userTags:t.UserTagList},model:{value:t.StartEvent.combo,callback:function(e){t.$set(t.StartEvent,"combo",e)},expression:"StartEvent.combo"}}):t._e()],1)]),e("div",{staticClass:"title_area nonuserselect",on:{click:t.addGlobalFilter}},[t._v(t._s(t.$t("message.全局筛选"))+" "),e("div",{staticClass:"title_area_button"},[e("div",[e("el-tooltip",{attrs:{effect:"light",placement:"top",content:t.$t("message.添加全局筛选")}},[e("b-icon",{staticClass:"span_button",attrs:{"custom-size":"mdi-18px",size:"default",icon:"plus"}})],1)],1),e("b-icon",{staticClass:"span_button",attrs:{"custom-size":"mdi-18px",size:"default",icon:""}})],1)]),e("div",[e("PropConditionGroup",{attrs:{eventProps:t.StartEvent.eventProps,keepLast:!1,userProps:t.UserPropList,userGroups:t.UserGroupList,userTags:t.UserTagList},model:{value:t.GlobalFilter,callback:function(e){t.GlobalFilter=e},expression:"GlobalFilter"}})],1),e("div",{staticClass:"title_area nonuserselect",on:{click:t.addGroupby}},[t._v(t._s(t.$t("message.分组"))),e("div",{staticClass:"title_area_button"},[e("div",[e("el-tooltip",{attrs:{effect:"light",placement:"top",content:t.$t("message.添加分组")}},[e("b-icon",{staticClass:"span_button",attrs:{"custom-size":"mdi-18px",size:"default",icon:"plus"}})],1)],1),e("b-icon",{staticClass:"span_button",attrs:{"custom-size":"mdi-18px",size:"default",icon:""}})],1)]),e("div",[e("draggable",t._b({staticClass:"list-group",attrs:{tag:"ul"},on:{end:t.afterGroupbyDrag},model:{value:t.Groupbys.children,callback:function(e){t.$set(t.Groupbys,"children",e)},expression:"Groupbys.children"}},"draggable",t.dragOptions,!1),[e("transition-group",{attrs:{type:"transition"}},t._l(t.Groupbys.children,(function(i){return e("li",{key:i.id,staticClass:"list-group-item"},[e("div",{staticClass:"matricLabelClass"},[e("b-icon",{staticClass:"dragicon",attrs:{icon:"drag"}}),e("div",{staticClass:"groupyicon"},[e("el-avatar",{staticClass:"elavatarclass",attrs:{size:18,shape:"square"}},[t._v(t._s(i.id))])],1),e("GroupbyCondition",{attrs:{tabGroups:t.tabGroups},model:{value:i.groupbyfield,callback:function(e){t.$set(i,"groupbyfield",e)},expression:"element.groupbyfield"}}),e("span",{on:{click:function(e){return t.deleteGroupby(i.id)}}},[e("el-tooltip",{attrs:{effect:"light",placement:"top",content:t.$t("message.删除")}},[e("b-icon",{staticClass:"iconClass",attrs:{icon:"close-circle",size:"is-small"}})],1)],1)],1)])})),0)],1)],1)])])]),e("pane",{attrs:{size:100-t.paneSize}},[e("div",{staticClass:"chart_root"},[e("div",{staticClass:"chart_toolbar"},[e("div",{staticClass:"chart_toolbar_left"},[e("el-select",{staticClass:"w85",attrs:{size:"mini"},model:{value:t.distriSet.Grain,callback:function(e){t.$set(t.distriSet,"Grain",e)},expression:"distriSet.Grain"}},[e("el-option",{attrs:{value:"day",label:t.$t("message.按天")}}),e("el-option",{attrs:{value:"week",label:t.$t("message.按周")}}),e("el-option",{attrs:{value:"month",label:t.$t("message.按月")}}),e("el-option",{attrs:{value:"mill",label:t.$t("message.按总计")}})],1),e("QuickDateTimeRangePicker",{ref:"quicktimepicker1",staticClass:"ml10",attrs:{fontSize:"mini"},on:{change:t.on_timerange_change},model:{value:t.analyzeTimeRange1,callback:function(e){t.analyzeTimeRange1=e},expression:"analyzeTimeRange1"}})],1),e("div",{staticClass:"chart_toolbar_right"},[e("div",{class:{svgicon_button:!0,activeIcon:!t.hideTable},on:{click:function(e){t.hideTable=!t.hideTable}}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:t.$t("message.表格"),placement:"bottom-end"}},[e("div",[e("inline-svg",{attrs:{width:"16",height:"16",src:i(69793)}})],1)])],1),t._l(t.availableChartList,(function(s){return e("div",{key:s.value,class:{svgicon_button:!0,activeIcon:!t.hideChart&&t.currentChart==s.value},on:{click:function(e){return t.switchChartType(s.value)}}},[e("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:s.label,placement:"bottom-end"}},[e("div",[e("inline-svg",{attrs:{width:"16",height:"16",src:i(97773)("./"+s.icon+".svg")}})],1)])],1)}))],2)]),t.tableDataLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.tableDataLoading,expression:"tableDataLoading"}],staticClass:"mh100"}):[t.hideChart?t._e():e("div",{staticClass:"chartDiv",attrs:{id:"chartViewContainer"}},[t.loadTableDataOnce?e("ChartView",{attrs:{option:t.chartOption,containerId:"chartViewContainer"}}):t._e()],1),t.loadTableDataOnce&&!t.hideTable?e("TablePlusSummaryCellEdit",{attrs:{enableSummary:!0,loading:t.tableDataLoading},model:{value:t.tableData,callback:function(e){t.tableData=e},expression:"tableData"}}):t._e()]],2)])],1)],1)])},a=[],n=(i(57658),i(83581)),r=i(97634),o=i(74855),l=i(90309),u=i(43782),c=i(9808),p=i(36144),d=function(){var t=this,e=t._self._c;return e("b-dropdown",{staticClass:"bdropdownborder",attrs:{"append-to-body":"","trap-focus":"","aria-role":"dialog"},scopedSlots:t._u([{key:"trigger",fn:function(){return[e("b-icon",{attrs:{icon:"cog-outline",size:"is-small"}})]},proxy:!0}])},[e("b-dropdown-item",{attrs:{focusable:!1,custom:"",paddingless:"","close-on-click":!1,"can-close":"outside"}},[e("div",{staticStyle:{width:"400px"}},[e("section",{staticClass:"modal-card-body"},[e("div",[e("el-radio-group",{attrs:{size:t.fontSize},on:{input:t.on_breakOption_change},model:{value:t.distributeOption,callback:function(e){t.distributeOption=e},expression:"distributeOption"}},[e("el-radio",{attrs:{size:t.fontSize,label:t.pub.def.DistributeOption.DistributeOptionDefault}},[t._v(t._s(t.$t("message.默认区间")))]),e("el-radio",{attrs:{size:t.fontSize,label:t.pub.def.DistributeOption.DistributeOptionCustom}},[t._v(t._s(t.$t("message.自定义区间")))])],1),t.distributeOption==t.pub.def.DistributeOption.DistributeOptionCustom?e("div",{staticClass:"pickViewContent onSliderScroll"},t._l(t.numberList,(function(i,s){return e("div",{key:i.id,staticClass:"flexcolumnAleft"},[1===i.id?e("div",{staticClass:"flexrowJleftAcenter"},[e("div",{staticClass:"w50"},[t._v(t._s(t.$t("message.区间"))+t._s(s+1))]),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v("(")]),e("span",{staticClass:"w100"},[t._v(t._s(t.pub.def.Infinite.InfiniteMin))]),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v("-")]),e("el-input-number",{attrs:{size:"mini","controls-position":"right"},on:{change:function(e){return t.on_change_num(i)}},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"item.value"}}),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v(")")])],1):t._e(),1!=i.id?e("div",{staticClass:"flexrowJleftAcenter"},[e("div",{staticClass:"w50"},[t._v(t._s(t.$t("message.区间"))+t._s(s+1))]),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v("[")]),e("el-input",{staticClass:"w100",attrs:{value:t.get_previous_max(i),size:"mini",disabled:!0}}),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v("-")]),e("el-input-number",{attrs:{size:"mini","controls-position":"right"},on:{change:function(e){return t.on_change_num(i)}},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"item.value"}}),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v(")")])],1):t._e(),i.id===t.numberList.length?e("div",{staticClass:"flexrowJleftAcenter"},[e("div",{staticClass:"w50"},[t._v(t._s(t.$t("message.区间"))+t._s(s+2))]),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v("[")]),e("el-input",{staticClass:"w100",attrs:{value:i.value,size:"mini",disabled:!0}}),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v("-")]),t._v(" "+t._s(t.pub.def.Infinite.InfiniteMax)+" "),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v(")")])],1):t._e()])})),0):t._e(),e("div",{staticClass:"mt10"},[t.distributeOption==t.pub.def.DistributeOption.DistributeOptionCustom?e("el-button",{staticClass:"ml10",attrs:{size:"small"},on:{click:t.addToList}},[t._v(t._s(t.$t("message.添加区间")))]):t._e(),t.distributeOption==t.pub.def.DistributeOption.DistributeOptionCustom?e("el-button",{staticClass:"ml10",attrs:{size:"small"},on:{click:t.resetList}},[t._v(t._s(t.$t("message.重置区间")))]):t._e()],1)],1)])])])],1)},h=[],m=i(794),v={model:{prop:"modelvalue",event:"modelvaluechange"},props:{modelvalue:{type:Object,default:function(){return{distributeOption:m.Z.def.DistributeOption.DistributeOptionCustom,numberList:[{id:1,value:1}]}}},fontSize:{type:String,default:"medium"}},mounted(){this.initialize()},data(){return{distributeOption:m.Z.def.DistributeOption.DistributeOptionDefault,numberList:[{id:1,value:1}]}},methods:{initialize(){this.distributeOption=this.modelvalue.distributeOption,m.Z.utils.IsEmptyArray(this.modelvalue.numberList)||(this.numberList=this.modelvalue.numberList)},confirm(){var t={};t.distributeOption=this.distributeOption,t.numberList=this.numberList,this.$emit("modelvaluechange",t)},on_breakOption_change(){this.confirm()},addToList(){var t=this.numberList[this.numberList.length-1].value+1;this.numberList[this.numberList.length-1].max=t,this.numberList.push({id:this.numberList.length+1,value:t,min:t-1}),this.confirm()},resetList(){this.numberList=[{id:1,value:1}],this.confirm()},get_previous_max(t){if(t.id>1)return this.numberList[t.id-2].value},on_change_num(t){1==this.numberList.length||(t.id==this.numberList.length?t.value<=this.numberList[t.id-2].value&&setTimeout((()=>{t.value=this.numberList[t.id-2].value+1}),10):1==t.id?t.value>=this.numberList[t.id].value&&setTimeout((()=>{t.value=this.numberList[t.id].value-1}),10):(t.value>=this.numberList[t.id].value&&setTimeout((()=>{t.value=this.numberList[t.id].value-1}),10),t.value<=this.numberList[t.id-2].value&&setTimeout((()=>{t.value=this.numberList[t.id-2].value+1}),10))),this.confirm()}}},b=v,g=i(1001),f=(0,g.Z)(b,d,h,!1,null,"0c30c207",null),_=f.exports,y=i(76983),T=i.n(y),C=i(63822),L=i(47056),S=i(62147),k=i(95705),Z=i(19976),O=i(9989),D=i(99877),E={components:{Splitpanes:n.F,Pane:n.X,ChartView:k.Z,SaveAnalysis:Z.Z,EventMetric:r.Z,ConfigNumSection:_,InlineSvg:D.ZP,draggable:T(),EditLabel:o.Z,PropConditionGroup:l.Z,GroupbyCondition:u.Z,QuickDateTimeRangePicker:c.Z,TablePlusSummaryCellEdit:p.Z},created(){},mounted(){this.initialize()},data:()=>({EntityList:[],EventList:[],UserPropList:[],UserGroupList:[],UserTagList:[],ModiferList:[],EventPropList:[],zones:[],availableChartList:[],distributeMetrics:[],report_id:0,id:0,name:"",isDragging:!1,active:!1,paneSize:45,zone:m.Z.def.TimeZone.Utcp8,EntityId:null,MultiEventPropList:[],GlobalFilter:{logicop:m.Z.def.LogicOp.LogicOpAnd,children:[]},Groupbys:{children:[]},analyzeTimeRange1:{time_pick:!1,quick_range:"this_7day",start_unit:"day",end_unit:"day",start_offset:1,end_offset:0,start_dynamic:!0,end_dynamic:!0,start_time:"2023-06-28 00:00:00",end_time:"2023-06-29 23:59:59"},tableData:{},tableDataLoading:!1,loadTableDataOnce:!1,StartEvent:{label:"",id:"A",event:"",metric:"",eventProps:[],loadingOk:!1,combo:{logicop:m.Z.def.LogicOp.LogicOpAnd,children:[]}},distriSet:{Grain:"day",distriParam:{distributeOption:m.Z.def.DistributeOption.DistributeOptionDefault,numberList:[]}},hideTable:!1,hideChart:!1,chartOption:{},tempLastPost:"",respData:{},currentChart:m.Z.def.ChartType.Line,chartDataSet:{},chartViewContainer:""}),methods:{initialize(){this.distributeMetrics=[{value:m.Z.def.MetricCategory.MetricCategoryEvent+"."+m.Z.def.MetricType.DistributeMetricTypeDays,label:this.$t("message.天数")},{value:m.Z.def.MetricCategory.MetricCategoryEvent+"."+m.Z.def.MetricType.DistributeMetricTypeHours,label:this.$t("message.小时数")}],this.availableChartList=S.Z.analysisDistribute.GetChartTypeList(),this.currentChart=m.Z.def.ChartType.Bar,this.loadZones(),this.ModiferList=m.Z.def.ModifierType.getLabelValueList();var t=this.getCurrAppId(),e=S.Z.api.LoadPlainEventList(t,!0),i=S.Z.api.LoadUserProp(t),s=S.Z.api.LoadUserClusterList(t),a=S.Z.api.LoadUserTagList(t,!0),n=S.Z.api.LoadAnalysisEnityList(t),r=Promise.all([i,e,s,a,n]);r.then((t=>{this.UserPropList=t[0],this.EventList=t[1],this.UserGroupList=t[2],this.UserTagList=t[3],this.EntityList=t[4],this.initDefaultUserEvent(),this.chooseSystemDefaultEntity(),this.UserGroupList.forEach((t=>{t.client_data=null,t.table_type=m.Z.def.TableType.TableTypeEvent})),this.UserTagList.forEach((t=>{t.client_data=null,t.table_type=m.Z.def.TableType.TableTypeEvent}));var e=this.$route.params;e&&(this.report_id=e.report_id),e&&!m.Z.utils.IsEmptyObj(e.client_data)&&this.restoreClientData(e.client_data)})).catch((t=>{m.Z.utils.Err(this,t)}))},initDefaultUserEvent(){this.EventList.length>0&&(this.StartEvent.event=this.EventList[0].value,this.loadEventProp(this.StartEvent))},chooseSystemDefaultEntity(){for(var t=0;t<this.EntityList.length;t++)if(this.EntityList[t].is_system)return this.EntityId=this.EntityList[t].id,void(this.EntityList[t].label=this.EntityList[t].label+this.$t("message.(默认)"))},restoreClientData(t){this.id=t.id,this.name=t.name,this.isDragging=t.isDragging,this.active=t.active,this.paneSize=t.paneSize,this.zone=t.zone,this.EntityId=t.EntityId,this.MultiEventPropList=t.MultiEventPropList,this.GlobalFilter=t.GlobalFilter,this.Groupbys=t.Groupbys,this.analyzeTimeRange1=t.analyzeTimeRange1,this.$refs.quicktimepicker1.setValue(t.analyzeTimeRange1),this.StartEvent=t.StartEvent,this.distriSet=t.distriSet,this.loadEventProp(this.StartEvent),this.tableDataLoading=!0,this.respData=t.respData,this.hideTable=!1,this.hideChart=!1,setTimeout((()=>{this.switchChartType(this.currentChart,!0)}),100)},getEventLabel(t){for(var e=0;e<this.EventList.length;e++)if(this.EventList[e].value==t)return this.EventList[e].label;return""},loadZones(){this.zones.push({label:m.Z.def.TimeZone.getZhLabel(m.Z.def.TimeZone.Utcp8),value:m.Z.def.TimeZone.Utcp8});var t=-12;while(t<13)8!==t&&this.zones.push({label:m.Z.def.TimeZone.getZhLabel(t),value:t}),t+=1},addTopEventPropCondition(t){m.Z.condx.GroupAdd(t,0,1,{selectedOp:"=",record:{}})},on_change_event(t){this.loadEventProp(t)},on_change_metric(t,e){e.extra.metricText=e.text},addGlobalFilter(){m.Z.condx.GroupAdd(this.GlobalFilter,0,1,{selectedOp:"=",record:{}})},loadEventProp(t){var e=this.getCurrAppId();S.Z.api.LoadEventPropParamPromise({app_id:e,include_obj_schema:!0,include_dim_schema:!0,include_obj_dim_schema:!0,limit_event_name:[t.event]}).then((e=>{t.eventProps=e,this.deleteDangleGlobalFilterCondition(),this.deleteDangleGroupbyCondition(),t.loadingOk=!0}))},deleteDangleGlobalFilterCondition(){for(var t=m.Z.condx.Clone2List(this.GlobalFilter),e=0;e<t.length;e++){for(var i=!1,s=0;s<this.StartEvent.eventProps.length;s++)if(this.StartEvent.eventProps[s].table_type==m.Z.def.TableType.TableTypeEvent&&this.StartEvent.eventProps[s].type_prop_name==t[e].record.pickersubject.type_prop_name){i=!0;break}i||m.Z.condx.GroupRemove(this.GlobalFilter,t[e].id)}},deleteDangleGroupbyCondition(){for(var t=m.Z.utils.DeepClone(this.Groupbys.children),e=0;e<t.length;e++){for(var i=!1,s=0;s<this.StartEvent.eventProps.length;s++)if(this.StartEvent.eventProps[s].table_type==m.Z.def.TableType.TableTypeEvent&&this.StartEvent.eventProps[s].type_prop_name==t[e].groupbyfield.editing_field.type_prop_name){i=!0;break}i||m.Z.condx.GroupRemove(this.Groupbys,t[e].id)}},addGroupby(){m.Z.condx.GroupAdd(this.Groupbys,0,1,{})},deleteGroupby(t){m.Z.condx.GroupRemove(this.Groupbys,t)},afterGroupbyDrag(){for(var t=m.Z.utils.DeepClone(this.Groupbys),e=0;e<t.children.length;e++)t.children[e].id=e+1;this.Groupbys.children=[],setTimeout((()=>{this.Groupbys=t}),10)},on_timerange_change(t){m.Z.utils.Ignore(t)},on_click_save(t){var e={},i=this.prepare_postdata(e);if(i)m.Z.utils.Err(this,i);else{var s={isDragging:this.isDragging,active:this.active,paneSize:this.paneSize,zone:this.zone,EntityId:this.EntityId,MultiEventPropList:this.MultiEventPropList,GlobalFilter:this.GlobalFilter,Groupbys:this.Groupbys,analyzeTimeRange1:this.analyzeTimeRange1,StartEvent:this.StartEvent,distriSet:this.distriSet,currentChart:this.currentChart};this.tempLastPost!=JSON.stringify(e)?this.QueryApi().then((()=>{this.$refs.saveAnalysis.showDialog(t,this.name,s,e,this.respData,m.Z.def.AnalysisType.AnalysisTypeDistribution,0,this.report_id),this.tableDataLoading=!1})).catch(function(t){m.Z.utils.Err(this,t),this.tableDataLoading=!1}.bind(this)):(this.$refs.saveAnalysis.showDialog(t,this.name,s,e,this.respData,m.Z.def.AnalysisType.AnalysisTypeDistribution,0,this.report_id),this.tableDataLoading=!1)}},on_save_success(t){this.name=t.name,this.id=t.id},prepare_postdata(t){t.app=this.getCurrAppId(),t.time_zone=this.zone,t.entity_id=this.EntityId,t.metric=S.Z.metric.VueEventMetricRecord2ApiEventRecord(this.StartEvent),t.comm_filter=S.Z.metric.VuePropFilterGroup2ApiGlobalFilter(this.GlobalFilter),t.breaks=S.Z.breaks.VueGroupbys2ApiBreakList(this.StartEvent.event,this.Groupbys),t.analysis_time_range={grain:this.distriSet.Grain,time_zone:this.zone,range1:this.analyzeTimeRange1},t.distri_set={distri_param:{distribute_option:this.distriSet.distriParam.distributeOption,num_list:[]}},this.distriSet.distriParam.numberList.forEach((e=>{t.distri_set.distri_param.num_list.push(String(e.value))}))},QueryApi(){var t={},e=this.prepare_postdata(t);return e?Promise.reject(e):(this.tableDataLoading=!0,this.tableData={},this.tempLastPost=JSON.stringify(t),L.Z["new"]().analyzeDistribute(t).then(function(t){m.Z.utils.Ignore(t),this.respData=t.data;var e=S.Z.analysisDistribute.datasetToChartDataset(this.respData);return this.tableData=S.Z.analysisDistribute.ToTabledata(this.respData),this.chartDataSet=O.Z.TableDataToChartSetList(e),this.chartOption=S.Z.BuidChart(this.currentChart,m.Z.utils.DeepClone(this.chartDataSet)),this.tableDataLoading=!1,this.loadTableDataOnce=!0,!0}.bind(this)))},on_click_analyze(){this.QueryApi().catch(function(t){m.Z.utils.Err(this,t),this.tableDataLoading=!1}.bind(this))},switchChartType(t,e){t==this.currentChart&&(this.hideChart=!this.hideChart),this.currentChart=t,e&&(this.hideChart=!1),this.hideChart||(this.tableDataLoading=!0,this.$nextTick((()=>{var t=S.Z.analysisDistribute.datasetToChartDataset(this.respData);this.tableData=S.Z.analysisDistribute.ToTabledata(this.respData),this.chartDataSet=O.Z.TableDataToChartSetList(t),this.chartOption=S.Z.BuidChart(this.currentChart,m.Z.utils.DeepClone(this.chartDataSet)),this.tableDataLoading=!1,this.loadTableDataOnce=!0})))}},computed:{...(0,C.Se)({getCurrAppId:"system/getCurrAppId"}),dragOptions(){return{animation:0,group:"description",disabled:!1,ghostClass:"ghost"}},tabGroups:function(){return S.Z.filtersub.MakeTabGroup(this.StartEvent.eventProps,this.UserPropList,this.UserGroupList,this.UserTagList)}}},x=E,P=(0,g.Z)(x,s,a,!1,null,"18b22abc",null),w=P.exports},17818:function(t,e,i){"use strict";i.d(e,{Z:function(){return c}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"meClass"},[t.topgroup.children&&t.topgroup.children.length>0?e("div",{staticClass:"grouproot"},[e("div",{staticClass:"group-header"},[t.topgroup.children.length>1?e("div",{staticClass:"logic-buttons"},[e("div",{class:{spanAnd:!0,logicOn:t.topgroup.logicop===t.pub.def.LogicOp.LogicOpAnd},on:{click:function(e){t.topgroup.logicop=t.pub.def.LogicOp.LogicOpAnd}}},[t._v(t._s(t.$t("message.且"))),e("span")]),e("div",{class:{spanOr:!0,logicOn:t.topgroup.logicop===t.pub.def.LogicOp.LogicOpOr},on:{click:function(e){t.topgroup.logicop=t.pub.def.LogicOp.LogicOpOr}}},[t._v(t._s(t.$t("message.或"))),e("span")])]):t._e()]),e("div",{staticClass:"condContainer"},t._l(t.topgroup.children,(function(i,s){return e("div",{key:i.id},[i.children&&i.children.length>0?e("div",{staticClass:"grouproot"},[e("div",{staticClass:"group-header"},[i.children.length>1?e("div",{staticClass:"logic-buttons"},[e("div",{class:{spanAnd:!0,logicOn:i.logicop===t.pub.def.LogicOp.LogicOpAnd},on:{click:function(e){i.logicop=t.pub.def.LogicOp.LogicOpAnd}}},[t._v(t._s(t.$t("message.且"))),e("span")]),e("div",{class:{spanOr:!0,logicOn:i.logicop===t.pub.def.LogicOp.LogicOpOr},on:{click:function(e){i.logicop=t.pub.def.LogicOp.LogicOpOr}}},[t._v(t._s(t.$t("message.或"))),e("span")])]):t._e()]),e("div",{staticClass:"condContainer"},t._l(t.topgroup.children[s].children,(function(a,n){return e("div",{key:a.id},[t._t("default",(function(){return[t._v(t._s(i)+" "+t._s(n))]}),{item:a,parent:t.topgroup.children[s]})],2)})),0)]):e("div",[t._t("default",(function(){return[t._v(t._s(i))]}),{item:i,parent:t.topgroup})],2)])})),0)]):t._e()])},a=[],n=i(794),r={components:{},props:{keepLast:{type:Boolean,default:!0},group:{type:Object,default:function(){return{logicop:n.Z.def.LogicOp.LogicOpAnd,children:[{id:1,label:"label1",name:"namelabel1"},{id:2,label:"label2",name:"namelabel2"},{id:3,label:"label3",name:"namelabel3",logicop:n.Z.def.LogicOp.LogicOpAnd,children:[{id:3,label:"label1",name:"namelabel1"},{id:2,label:"label2",name:"namelabel2"}]}]}}},subjects:{type:Array,default:()=>[]}},data(){return{topgroup:{}}},created(){this.topgroup=this.group},mounted(){},methods:{},computed:{}},o=r,l=i(1001),u=(0,l.Z)(o,s,a,!1,null,"c6cbd6c8",null),c=u.exports},43782:function(t,e,i){"use strict";i.d(e,{Z:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{ref:"me",attrs:{id:"crf_groupbycondition"}},[e("div",{staticClass:"flexrowAcenter"},[e("SelectPicker",{attrs:{defaulted:t.defaulted,tabGroups:t.tabGroups},on:{pickviewshow:t.on_picker_show,change:t.on_select_change},model:{value:t.editing_field,callback:function(e){t.editing_field=e},expression:"editing_field"}}),t.showSettingIcon(t.editing_field)?e("div",{on:{click:function(e){t.viewshow=!0}}},[e("b-icon",{staticClass:"setIcon ml5",attrs:{icon:"cog-outline",size:"is-small"}})],1):t._e()],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.viewshow,expression:"viewshow"}],staticClass:"groupbypickview"},[e("div",{staticClass:"groupbypicktitle"},[t._v(t._s(t.$t("message.分组方式-列表")))]),t.isBasicListType(t.editing_field)?e("div",[e("el-radio-group",{on:{input:t.on_breakOption_change},model:{value:t.breakOption,callback:function(e){t.breakOption=e},expression:"breakOption"}},[e("el-radio",{attrs:{size:t.fontSize,label:t.pub.def.BreakOption.BreakOptionListWhole}},[t._v(t._s(t.$t("message.按值")))]),e("el-radio",{attrs:{size:t.fontSize,label:t.pub.def.BreakOption.BreakOptionListElement}},[t._v(t._s(t.$t("message.按元素")))]),e("el-radio",{attrs:{size:t.fontSize,label:t.pub.def.BreakOption.BreakOptionListSet}},[t._v(t._s(t.$t("message.按元素集合")))])],1)],1):t._e(),t.isDateTimeType(t.editing_field)?e("div",{staticClass:"h40 flexrowAcenter"},[e("el-radio-group",{on:{input:t.on_radio_change_time},model:{value:t.timeSummary,callback:function(e){t.timeSummary=e},expression:"timeSummary"}},[e("el-radio",{attrs:{size:t.fontSize,label:t.PERIOD_SUMMARY_NO}},[t._v(t._s(t.$t("message.不汇总")))]),e("el-radio",{attrs:{size:t.fontSize,label:t.PERIOD_SUMMARY_YES}},[t._v(t._s(t.$t("message.按时段汇总")))])],1),t.timeSummary==t.PERIOD_SUMMARY_YES?e("div",{staticClass:"flexrowAcenter ml5"},[e("b-select",{staticClass:"w100",attrs:{size:"is-small"},on:{input:t.on_breakOption_change},model:{value:t.breakOption,callback:function(e){t.breakOption=e},expression:"breakOption"}},t._l(t.timePeriodOp,(function(i){return e("option",{key:i.value,domProps:{value:i.value}},[t._v(" "+t._s(i.label)+" ")])})),0)],1):t._e()],1):t._e(),t.isNumberType(t.editing_field)?e("div",[e("el-radio-group",{on:{input:t.on_breakOption_change},model:{value:t.breakOption,callback:function(e){t.breakOption=e},expression:"breakOption"}},[e("el-radio",{attrs:{size:t.fontSize,label:t.pub.def.BreakOption.BreakOptionNumberDefault}},[t._v(t._s(t.$t("message.默认区间")))]),e("el-radio",{attrs:{size:t.fontSize,label:t.pub.def.BreakOption.BreakOptionNumberValue}},[t._v(t._s(t.$t("message.离散值(无区间)")))]),e("el-radio",{attrs:{size:t.fontSize,label:t.pub.def.BreakOption.BreakOptionNumberCustom}},[t._v(t._s(t.$t("message.自定义区间")))])],1),t.breakOption==t.pub.def.BreakOption.BreakOptionNumberCustom?e("div",{staticClass:"pickViewContent onSliderScroll"},t._l(t.numberList,(function(i,s){return e("div",{key:i.id,staticClass:"flexcolumnAleft"},[1===i.id?e("div",{staticClass:"flexrowJleftAcenter"},[e("div",{staticClass:"w50"},[t._v(t._s(t.$t("message.区间"))+t._s(s+1))]),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v("(")]),e("span",{staticClass:"w100"},[t._v(t._s(t.pub.def.Infinite.InfiniteMin))]),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v("-")]),e("el-input-number",{attrs:{size:"mini","controls-position":"right"},on:{change:function(e){return t.on_change_num(i)}},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"item.value"}}),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v(")")])],1):t._e(),1!=i.id?e("div",{staticClass:"flexrowJleftAcenter"},[e("div",{staticClass:"w50"},[t._v(t._s(t.$t("message.区间"))+t._s(s+1))]),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v("(")]),e("el-input",{staticClass:"w100",attrs:{value:t.get_previous_max(i),size:"mini",disabled:!0}}),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v("-")]),e("el-input-number",{attrs:{size:"mini","controls-position":"right"},on:{change:function(e){return t.on_change_num(i)}},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"item.value"}}),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v(")")])],1):t._e(),i.id===t.numberList.length?e("div",{staticClass:"flexrowJleftAcenter"},[e("div",{staticClass:"w50"},[t._v(t._s(t.$t("message.区间"))+t._s(s+2))]),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v("(")]),e("el-input",{staticClass:"w100",attrs:{value:i.value,size:"mini",disabled:!0}}),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v("-")]),t._v(" "+t._s(t.pub.def.Infinite.InfiniteMax)+" "),e("div",{staticClass:"w15 flexcolumnAcenter"},[t._v(")")])],1):t._e()])})),0):t._e(),t.breakOption==t.pub.def.BreakOption.BreakOptionNumberCustom?e("div",{staticClass:"span_button",on:{click:t.addToList}},[e("b-icon",{attrs:{"custom-size":"mdi-18px",size:"default",icon:"plus"}}),t._v(t._s(t.$t("message.添加区间")))],1):t._e()],1):t._e()])])},a=[],n=(i(57658),i(794)),r=i(43436);const o="no",l="yes";var u={name:"DateTimePicker",components:{SelectPicker:r.Z},model:{prop:"modelvalue",event:"modelvaluechange"},props:{inputPlaceHolder:{type:String,default:"请选择日期"},modelvalue:{type:Object,default:function(){return{editing_field:{},breakOption:n.Z.def.BreakOption.BreakOptionListWhole,numberList:[{id:1,value:1}]}}},defaulted:{type:Boolean,default:!0},fontSize:{type:String,default:"mini"},setting:{type:Boolean,default:!0},tabGroups:{type:Array,default:()=>[]}},data(){return{PERIOD_SUMMARY_NO:"no",PERIOD_SUMMARY_YES:"yes",timeSummary:"no",eventListLoadOk:!1,timePeriodOp:[],editing_field:{},viewshow:!1,breakOption:n.Z.def.BreakOption.BreakOptionListWhole,numberList:[{id:1,value:1}]}},created(){this.initialize()},mounted(){(this.modelvalue&&this.modelvalue.length>12||this.modelvalue&&10===this.modelvalue.length)&&this.confirm(),document.addEventListener("click",this.dc,!0)},beforeDestroy(){document.removeEventListener("click",this.dc,!0)},methods:{initialize(){this.timePeriodOp=this.getTimePeriodList(),this.modelvalue&&(this.breakOption=this.modelvalue.breakOption,this.numberList=this.modelvalue.numberList,this.editing_field=this.modelvalue.editing_field)},confirm(){var t={};t.breakOption=this.breakOption,t.numberList=this.numberList,t.editing_field=this.editing_field,this.$emit("modelvaluechange",t)},dc(t){var e=this.$el.contains(t.target);e||(this.viewshow=!1)},on_breakOption_change(){console.log("====on_breakOption_change=========",this.breakOption),this.confirm()},getTimePeriodList(){var t=[];return t.push({value:n.Z.def.BreakOption.BreakOptionTimeMinute,label:this.$t("message.分钟")}),t.push({value:n.Z.def.BreakOption.BreakOptionTimeHour,label:this.$t("message.小时")}),t.push({value:n.Z.def.BreakOption.BreakOptionTimeDay,label:this.$t("message.天")}),t.push({value:n.Z.def.BreakOption.BreakOptionTimeWeek,label:this.$t("message.周")}),t.push({value:n.Z.def.BreakOption.BreakOptionTimeMonth,label:this.$t("message.月")}),t.push({value:n.Z.def.BreakOption.BreakOptionTimeYear,label:this.$t("message.年")}),t},addToList(){var t=this.numberList[this.numberList.length-1].value+1;this.numberList[this.numberList.length-1].max=t,this.numberList.push({id:this.numberList.length+1,value:t,min:t-1})},on_picker_show(t){t&&(this.viewshow=!1)},get_previous_max(t){if(t.id>1)return this.numberList[t.id-2].value},on_radio_change_time(t){console.log("====on_radio_change_time 1==========",t,this.breakOption),t==o?this.breakOption=n.Z.def.BreakOption.BreakOptionTimeSecond:t==l&&(this.breakOption=n.Z.def.BreakOption.BreakOptionTimeMinute),console.log("====on_radio_change_time 2==========",t,this.breakOption),this.confirm()},on_change_num(t){1==this.numberList.length||(t.id==this.numberList.length?t.value<=this.numberList[t.id-2].value&&setTimeout((()=>{t.value=this.numberList[t.id-2].value+1}),10):1==t.id?t.value>=this.numberList[t.id].value&&setTimeout((()=>{t.value=this.numberList[t.id].value-1}),10):(t.value>=this.numberList[t.id].value&&setTimeout((()=>{t.value=this.numberList[t.id].value-1}),10),t.value<=this.numberList[t.id-2].value&&setTimeout((()=>{t.value=this.numberList[t.id-2].value+1}),10))),this.confirm()},isDateTimeType(t){return!(!t||t.data_source_type!=n.Z.def.DataSourceType.DataSourceTypeEventProp&&t.data_source_type!=n.Z.def.DataSourceType.DataSourceTypeUserProp&&t.data_source_type!=n.Z.def.DataSourceType.DataSourceTypeUserTag||t.type!=n.Z.def.DataType.DataTypeDatetime)},isNumberType(t){return!(!t||t.data_source_type!=n.Z.def.DataSourceType.DataSourceTypeEventProp&&t.data_source_type!=n.Z.def.DataSourceType.DataSourceTypeUserProp&&t.data_source_type!=n.Z.def.DataSourceType.DataSourceTypeUserTag||t.type!=n.Z.def.DataType.DataTypeNumber)},isBasicListType(t){return!(!t||t.data_source_type!=n.Z.def.DataSourceType.DataSourceTypeEventProp&&t.data_source_type!=n.Z.def.DataSourceType.DataSourceTypeUserProp&&t.data_source_type!=n.Z.def.DataSourceType.DataSourceTypeUserTag||!n.Z.def.DataType.isBasicListType(t.type))},showSettingIcon(t){if(t)if(t.data_source_type==n.Z.def.DataSourceType.DataSourceTypeEventProp||t.data_source_type==n.Z.def.DataSourceType.DataSourceTypeUserProp||t.data_source_type==n.Z.def.DataSourceType.DataSourceTypeUserTag){if(t.type==n.Z.def.DataType.DataTypeNumber||t.type==n.Z.def.DataType.DataTypeDatetime)return!0;if(n.Z.def.DataType.isBasicListType(t.type))return!0}else t.data_source_type,n.Z.def.DataSourceType.DataSourceTypeUserCluster},on_select_change(t){this.breakOption=n.Z.def.BreakOption.BreakOptionNormal,this.isNumberType(t)?this.breakOption=n.Z.def.BreakOption.BreakOptionNumberDefault:this.isDateTimeType(t)?(this.timeSummary=this.PERIOD_SUMMARY_NO,this.breakOption=n.Z.def.BreakOption.BreakOptionTimeSecond):this.isBasicListType(t)&&(this.breakOption=n.Z.def.BreakOption.BreakOptionListWhole),this.editing_field=t,this.confirm()}},watch:{},computed:{}},c=u,p=i(1001),d=(0,p.Z)(c,s,a,!1,null,"202cb59e",null),h=d.exports},90309:function(t,e,i){"use strict";i.d(e,{Z:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"meClass"},[e("div",[e("ConditionGroup",{attrs:{group:t.filterable},scopedSlots:t._u([{key:"default",fn:function(i){return[e("div",{staticClass:"condItem"},[e("PropCondition",{staticClass:"pading2",attrs:{favorites:t.favorites,eventProps:t.eventProps,userProps:t.userProps,userGroups:t.userGroups,userTags:t.userTags},on:{change:t.on_change_condition},model:{value:i.item.record,callback:function(e){t.$set(i.item,"record",e)},expression:"slotProps.item.record"}}),e("span",{on:{click:function(e){return t.on_click_add(t.filterable,i.item.id,i.item.level)}}},[e("el-tooltip",{attrs:{effect:"light",placement:"top",content:t.$t("message.添加条件")}},[e("b-icon",{staticClass:"condIcon",attrs:{icon:"filter-variant-plus",size:"is-small"}})],1)],1),!t.keepLast||t.groupItemCount(t.filterable)>1?e("span",{on:{click:function(e){return t.on_click_trash(t.filterable,i.item.id)}}},[e("el-tooltip",{attrs:{effect:"light",placement:"top",content:t.$t("message.删除条件")}},[e("b-icon",{staticClass:"condIcon",attrs:{icon:"trash-can-outline",size:"is-small"}})],1)],1):t._e()],1)]}}])})],1)])},a=[],n=i(97461),r=i(17818),o=i(794),l={components:{PropCondition:n.Z,ConditionGroup:r.Z},model:{prop:"filters",event:"filterschange"},props:{keepLast:{type:Boolean,default:!0},favorites:{type:String,default:"aa"},filters:{type:Object,default:function(){return{logicop:o.Z.def.LogicOp.LogicOpAnd,children:[{id:1,label:"label1",record:{pickersubject:{}}}]}}},eventProps:{type:Array,default:()=>[{value:"FAIL",label:"累计购买次数",label2:o.Z.def.PropertyType.getZhLabel(o.Z.def.PropertyType.PropertyTypeCustom),type:o.Z.def.DataType.DataTypeNumber},{value:"rank",label:"排名",label2:o.Z.def.PropertyType.getZhLabel(o.Z.def.PropertyType.PropertyTypeCustom),type:o.Z.def.DataType.DataTypeNumber},{value:"guild_name",label:"用户名字",label2:o.Z.def.PropertyType.getZhLabel(o.Z.def.PropertyType.PropertyTypeCustom),type:o.Z.def.DataType.DataTypeString},{value:"guild_member",label:"年龄",label2:o.Z.def.PropertyType.getZhLabel(o.Z.def.PropertyType.PropertyTypeCustom),type:o.Z.def.DataType.DataTypeNumber},{value:"guild_leader",label:"性别",label2:o.Z.def.PropertyType.getZhLabel(o.Z.def.PropertyType.PropertyTypeCustom),type:o.Z.def.DataType.DataTypeString},{value:"win",label:"胜利次数",label2:o.Z.def.PropertyType.getZhLabel(o.Z.def.PropertyType.PropertyTypeCustom),type:o.Z.def.DataType.DataTypeNumber}]},userProps:{type:Array,default:()=>[{value:"FAIL",label:"累计购买次数",label2:o.Z.def.PropertyType.getZhLabel(o.Z.def.PropertyType.PropertyTypeCustom),type:o.Z.def.DataType.DataTypeNumber},{value:"rank",label:"排名",label2:o.Z.def.PropertyType.getZhLabel(o.Z.def.PropertyType.PropertyTypeCustom),type:o.Z.def.DataType.DataTypeNumber},{value:"guild_name",label:"用户名字",label2:o.Z.def.PropertyType.getZhLabel(o.Z.def.PropertyType.PropertyTypeCustom),type:o.Z.def.DataType.DataTypeString},{value:"guild_member",label:"年龄",label2:o.Z.def.PropertyType.getZhLabel(o.Z.def.PropertyType.PropertyTypeCustom),type:o.Z.def.DataType.DataTypeNumber},{value:"guild_leader",label:"性别",label2:o.Z.def.PropertyType.getZhLabel(o.Z.def.PropertyType.PropertyTypeCustom),type:o.Z.def.DataType.DataTypeString},{value:"win",label:"胜利次数",label2:o.Z.def.PropertyType.getZhLabel(o.Z.def.PropertyType.PropertyTypeCustom),type:o.Z.def.DataType.DataTypeNumber}]},userGroups:{type:Array,default:()=>[]},userTags:{type:Array,default:()=>[]}},data(){return{selectedEvent:"",filterable:{}}},created(){this.filterable=this.filters},mounted(){},watch:{filters(t,e){o.Z.utils.Ignore(e),this.filterable.children=t.children,this.filterable.logicop=t.logicop},eventProps(t,e){o.Z.utils.Ignore(t,e)}},methods:{on_click_add(t,e,i){o.Z.condx.GroupAdd(t,e,i,{record:{pickersubject:{}}})},on_click_trash(t,e){o.Z.condx.GroupRemove(t,e)},onMetricChange(t,e,i,s){o.Z.utils.Ignore(t,e,i,s)},on_event_change(t){this.selectedEvent=t},on_change_condition(t){o.Z.utils.Ignore(t)},groupItemCount(t){return o.Z.condx.GroupItemCount(t)}}},u=l,c=i(1001),p=(0,c.Z)(u,s,a,!1,null,"b60fea14",null),d=p.exports},97773:function(t,e,i){var s={"./boxplot.svg":78676,"./boxplot2.svg":39006,"./chart-bar.svg":46980,"./chart-cumulative.svg":45413,"./chart-donut-variant.svg":64822,"./chart-line.svg":53481,"./chart-pie.svg":66097,"./chart-sankey.svg":7085,"./chart-scatter-plot.svg":46090,"./distribute-horizontal-center.svg":3543,"./flask-empty-outline.svg":34426,"./hexagon-slice-4.svg":19742,"./map.svg":76038,"./speedometer.svg":37751,"./table-large.svg":69793,"./vs.svg":21068,"./waves.svg":84530};function a(t){var e=n(t);return i(e)}function n(t){if(!i.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}a.keys=function(){return Object.keys(s)},a.resolve=n,t.exports=a,a.id=97773},78676:function(t,e,i){"use strict";t.exports=i.p+"img/boxplot.830d642c.svg"},39006:function(t,e,i){"use strict";t.exports=i.p+"img/boxplot2.d70af34e.svg"},46980:function(t,e,i){"use strict";t.exports=i.p+"img/chart-bar.a27b4433.svg"},45413:function(t,e,i){"use strict";t.exports=i.p+"img/chart-cumulative.73aa0874.svg"},64822:function(t,e,i){"use strict";t.exports=i.p+"img/chart-donut-variant.7fc12b7c.svg"},53481:function(t,e,i){"use strict";t.exports=i.p+"img/chart-line.c84b9ae5.svg"},66097:function(t,e,i){"use strict";t.exports=i.p+"img/chart-pie.20b9dd18.svg"},7085:function(t,e,i){"use strict";t.exports=i.p+"img/chart-sankey.6afe618b.svg"},46090:function(t,e,i){"use strict";t.exports=i.p+"img/chart-scatter-plot.92c693bc.svg"},3543:function(t,e,i){"use strict";t.exports=i.p+"img/distribute-horizontal-center.f7df265f.svg"},34426:function(t,e,i){"use strict";t.exports=i.p+"img/flask-empty-outline.77e3be99.svg"},19742:function(t,e,i){"use strict";t.exports=i.p+"img/hexagon-slice-4.eec52121.svg"},76038:function(t,e,i){"use strict";t.exports=i.p+"img/map.07088126.svg"},37751:function(t,e,i){"use strict";t.exports=i.p+"img/speedometer.9e43f341.svg"},69793:function(t,e,i){"use strict";t.exports=i.p+"img/table-large.07f1ecc3.svg"},21068:function(t,e,i){"use strict";t.exports=i.p+"img/vs.cae95fd8.svg"},84530:function(t,e,i){"use strict";t.exports=i.p+"img/waves.25ac4130.svg"},99877:function(t,e,i){"use strict";i.d(e,{ZP:function(){return n}});const s={};function a(t){return Object.keys(t).reduce(((e,i)=>(!1!==t[i]&&null!==t[i]&&void 0!==t[i]&&(e[i]=t[i]),e)),{})}const n={name:"InlineSvg",inheritAttrs:!1,render(t){return this.svgElSource?t("svg",{on:this.$listeners,attrs:Object.assign(this.getSvgAttrs(this.svgElSource),a(this.$attrs)),domProps:{innerHTML:this.getSvgContent(this.svgElSource)}}):null},props:{src:{type:String,required:!0},title:{type:String},transformSource:{type:Function,default:t=>t},keepDuringLoading:{type:Boolean,default:!0}},data(){return{svgElSource:null}},watch:{src(t){this.getSource(t)}},mounted(){this.getSource(this.src)},methods:{getSvgAttrs(t){let e={};const i=t.attributes;if(!i)return e;for(let s=i.length-1;s>=0;s--)e[i[s].name]=i[s].value;return e},getSvgContent(t){return t=t.cloneNode(!0),t=this.transformSource(t),this.title&&r(t,this.title),t.innerHTML},getSource(t){s[t]||(s[t]=this.download(t)),this.svgElSource&&s[t].getIsPending()&&!this.keepDuringLoading&&(this.svgElSource=null,this.$emit("unloaded")),s[t].then((t=>{this.svgElSource=t,this.$nextTick((()=>{this.$emit("loaded",this.$el)}))})).catch((e=>{this.svgElSource&&(this.svgElSource=null,this.$emit("unloaded")),delete s[t],this.$emit("error",e)}))},download(t){return o(new Promise(((e,i)=>{const s=new XMLHttpRequest;s.open("GET",t,!0),s.onload=()=>{if(s.status>=200&&s.status<400)try{const t=new DOMParser,a=t.parseFromString(s.responseText,"text/xml");let n=a.getElementsByTagName("svg")[0];n?e(n):i(new Error('Loaded file is not valid SVG"'))}catch(t){i(t)}else i(new Error("Error loading SVG"))},s.onerror=i,s.send()})))}}};function r(t,e){const i=t.getElementsByTagName("title");if(i.length)i[0].textContent=e;else{const i=document.createElementNS("http://www.w3.org/2000/svg","title");i.textContent=e,t.insertBefore(i,t.firstChild)}}function o(t){if(t.getIsPending)return t;let e=!0,i=t.then((t=>(e=!1,t)),(t=>{throw e=!1,t}));return i.getIsPending=function(){return e},i}}}]);
"use strict";(self["webpackChunkwildfire"]=self["webpackChunkwildfire"]||[]).push([[8333],{17818:function(e,t,o){o.d(t,{Z:function(){return c}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"meClass"},[e.topgroup.children&&e.topgroup.children.length>0?t("div",{staticClass:"grouproot"},[t("div",{staticClass:"group-header"},[e.topgroup.children.length>1?t("div",{staticClass:"logic-buttons"},[t("div",{class:{spanAnd:!0,logicOn:e.topgroup.logicop===e.pub.def.LogicOp.LogicOpAnd},on:{click:function(t){e.topgroup.logicop=e.pub.def.LogicOp.LogicOpAnd}}},[e._v(e._s(e.$t("message.且"))),t("span")]),t("div",{class:{spanOr:!0,logicOn:e.topgroup.logicop===e.pub.def.LogicOp.LogicOpOr},on:{click:function(t){e.topgroup.logicop=e.pub.def.LogicOp.LogicOpOr}}},[e._v(e._s(e.$t("message.或"))),t("span")])]):e._e()]),t("div",{staticClass:"condContainer"},e._l(e.topgroup.children,(function(o,l){return t("div",{key:o.id},[o.children&&o.children.length>0?t("div",{staticClass:"grouproot"},[t("div",{staticClass:"group-header"},[o.children.length>1?t("div",{staticClass:"logic-buttons"},[t("div",{class:{spanAnd:!0,logicOn:o.logicop===e.pub.def.LogicOp.LogicOpAnd},on:{click:function(t){o.logicop=e.pub.def.LogicOp.LogicOpAnd}}},[e._v(e._s(e.$t("message.且"))),t("span")]),t("div",{class:{spanOr:!0,logicOn:o.logicop===e.pub.def.LogicOp.LogicOpOr},on:{click:function(t){o.logicop=e.pub.def.LogicOp.LogicOpOr}}},[e._v(e._s(e.$t("message.或"))),t("span")])]):e._e()]),t("div",{staticClass:"condContainer"},e._l(e.topgroup.children[l].children,(function(a,i){return t("div",{key:a.id},[e._t("default",(function(){return[e._v(e._s(o)+" "+e._s(i))]}),{item:a,parent:e.topgroup.children[l]})],2)})),0)]):t("div",[e._t("default",(function(){return[e._v(e._s(o))]}),{item:o,parent:e.topgroup})],2)])})),0)]):e._e()])},a=[],i=o(794),r={components:{},props:{keepLast:{type:Boolean,default:!0},group:{type:Object,default:function(){return{logicop:i.Z.def.LogicOp.LogicOpAnd,children:[{id:1,label:"label1",name:"namelabel1"},{id:2,label:"label2",name:"namelabel2"},{id:3,label:"label3",name:"namelabel3",logicop:i.Z.def.LogicOp.LogicOpAnd,children:[{id:3,label:"label1",name:"namelabel1"},{id:2,label:"label2",name:"namelabel2"}]}]}}},subjects:{type:Array,default:()=>[]}},data(){return{topgroup:{}}},created(){this.topgroup=this.group},mounted(){},methods:{},computed:{}},n=r,s=o(1001),p=(0,s.Z)(n,l,a,!1,null,"c6cbd6c8",null),c=p.exports},78333:function(e,t,o){o.d(t,{Z:function(){return f}});var l=function(){var e=this,t=e._self._c;return e.initok?t("div",{ref:"me",attrs:{id:"crf_EventCondition"}},[t("el-select",{staticClass:"mr10",attrs:{size:"mini","default-first-option":!0,placeholder:e.$t("message.请选择")},on:{change:e.on_change_event},model:{value:e.selectedEvent,callback:function(t){e.selectedEvent=t},expression:"selectedEvent"}},e._l(e.eventList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("span",{on:{click:function(t){return e.on_click_add(e.modelValueRef.combo,0,1)}}},[t("b-tooltip",{attrs:{label:e.$t("message.添加筛选")}},[t("b-icon",{staticClass:"iconClass",attrs:{icon:"filter-plus-outline",size:"is-small"}})],1)],1),e.visibledelete?t("span",{on:{click:e.on_click_delete}},[t("b-tooltip",{attrs:{label:e.$t("message.删除")}},[t("b-icon",{staticClass:"iconClass",attrs:{icon:"close-circle",size:"is-small"}})],1)],1):e._e(),e.loadingPropsOk?t("PropConditionGroup",{attrs:{favorites:e.favorites,keepLast:e.keepLast,eventProps:e.eventProps},model:{value:e.modelValueRef.combo,callback:function(t){e.$set(e.modelValueRef,"combo",t)},expression:"modelValueRef.combo"}}):e._e()],1):e._e()},a=[],i=o(90309),r=o(794),n=o(62147),s=o(63822),p={components:{PropConditionGroup:i.Z},model:{prop:"modelvalue",event:"modelvaluechange"},props:{keepLast:{type:Boolean,default:!0},favorites:{type:String,default:"aa"},modelvalue:{type:Object,default:function(){return{event:"",combo:{logicop:r.Z.def.LogicOp.LogicOpAnd,children:[{id:1,label:"label1",record:{pickersubject:{}}}]}}}},visibledelete:{type:Boolean,default:!1},eventList:{type:Array,default:()=>[]}},data(){return{initok:!1,selectedEvent:"",eventProps:[],loadingPropsOk:!1,modelValueRef:{}}},created(){this.initialize()},mounted(){},watch:{},methods:{initialize(){var e=!1;this.modelValueRef=this.modelvalue,r.Z.utils.IsEmptyStr(this.modelValueRef.event)?this.eventList&&this.eventList.length>0&&(this.selectedEvent=this.eventList[0].value,e=!0):this.selectedEvent=this.modelValueRef.event;var t=this.loadEventProp(this.selectedEvent),o=Promise.all([t]);o.then((t=>{this.eventProps=t[0],this.initok=!0,this.loadingPropsOk=!0,this.initialized(e)})).catch((e=>{r.Z.utils.Err(this,e)}))},initialized(e){r.Z.utils.Ignore(e),this.confirm()},on_click_add(e,t,o){console.log("on_click_add(combo, afterId, level)",e,t,o),r.Z.condx.GroupPushBack(e,{record:{}}),this.confirm()},on_click_delete(){this.$emit("delete_click")},on_change_event(e){this.modelValueRef.combo.children=[],this.selectedEvent=e,this.modelValueRef.event=e,this.loadingPropsOk=!1,this.eventProps=[];var t=this.loadEventProp(e);t.then((e=>{this.eventProps=e,this.loadingPropsOk=!0,this.confirm()})).catch((e=>{r.Z.utils.Err(this,e)}))},loadEventProp(e){var t=this.getCurrAppId();return n.Z.api.LoadEventPropParamPromise({app_id:t,include_obj_schema:!0,include_dim_schema:!0,include_obj_dim_schema:!0,limit_event_name:[e]})},confirm(){this.modelValueRef.event=this.selectedEvent,this.$emit("modelvaluechange",this.modelValueRef),this.$emit("change",this.modelValueRef)}},computed:{...(0,s.Se)({getCurrAppId:"system/getCurrAppId"})}},c=p,d=o(1001),u=(0,d.Z)(c,l,a,!1,null,"47309b66",null),f=u.exports},90309:function(e,t,o){o.d(t,{Z:function(){return u}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"meClass"},[t("div",[t("ConditionGroup",{attrs:{group:e.filterable},scopedSlots:e._u([{key:"default",fn:function(o){return[t("div",{staticClass:"condItem"},[t("PropCondition",{staticClass:"pading2",attrs:{favorites:e.favorites,eventProps:e.eventProps,userProps:e.userProps,userGroups:e.userGroups,userTags:e.userTags},on:{change:e.on_change_condition},model:{value:o.item.record,callback:function(t){e.$set(o.item,"record",t)},expression:"slotProps.item.record"}}),t("span",{on:{click:function(t){return e.on_click_add(e.filterable,o.item.id,o.item.level)}}},[t("el-tooltip",{attrs:{effect:"light",placement:"top",content:e.$t("message.添加条件")}},[t("b-icon",{staticClass:"condIcon",attrs:{icon:"filter-variant-plus",size:"is-small"}})],1)],1),!e.keepLast||e.groupItemCount(e.filterable)>1?t("span",{on:{click:function(t){return e.on_click_trash(e.filterable,o.item.id)}}},[t("el-tooltip",{attrs:{effect:"light",placement:"top",content:e.$t("message.删除条件")}},[t("b-icon",{staticClass:"condIcon",attrs:{icon:"trash-can-outline",size:"is-small"}})],1)],1):e._e()],1)]}}])})],1)])},a=[],i=o(97461),r=o(17818),n=o(794),s={components:{PropCondition:i.Z,ConditionGroup:r.Z},model:{prop:"filters",event:"filterschange"},props:{keepLast:{type:Boolean,default:!0},favorites:{type:String,default:"aa"},filters:{type:Object,default:function(){return{logicop:n.Z.def.LogicOp.LogicOpAnd,children:[{id:1,label:"label1",record:{pickersubject:{}}}]}}},eventProps:{type:Array,default:()=>[{value:"FAIL",label:"累计购买次数",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber},{value:"rank",label:"排名",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber},{value:"guild_name",label:"用户名字",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeString},{value:"guild_member",label:"年龄",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber},{value:"guild_leader",label:"性别",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeString},{value:"win",label:"胜利次数",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber}]},userProps:{type:Array,default:()=>[{value:"FAIL",label:"累计购买次数",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber},{value:"rank",label:"排名",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber},{value:"guild_name",label:"用户名字",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeString},{value:"guild_member",label:"年龄",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber},{value:"guild_leader",label:"性别",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeString},{value:"win",label:"胜利次数",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber}]},userGroups:{type:Array,default:()=>[]},userTags:{type:Array,default:()=>[]}},data(){return{selectedEvent:"",filterable:{}}},created(){this.filterable=this.filters},mounted(){},watch:{filters(e,t){n.Z.utils.Ignore(t),this.filterable.children=e.children,this.filterable.logicop=e.logicop},eventProps(e,t){n.Z.utils.Ignore(e,t)}},methods:{on_click_add(e,t,o){n.Z.condx.GroupAdd(e,t,o,{record:{pickersubject:{}}})},on_click_trash(e,t){n.Z.condx.GroupRemove(e,t)},onMetricChange(e,t,o,l){n.Z.utils.Ignore(e,t,o,l)},on_event_change(e){this.selectedEvent=e},on_change_condition(e){n.Z.utils.Ignore(e)},groupItemCount(e){return n.Z.condx.GroupItemCount(e)}}},p=s,c=o(1001),d=(0,c.Z)(p,l,a,!1,null,"b60fea14",null),u=d.exports}}]);
"use strict";(self["webpackChunkwildfire"]=self["webpackChunkwildfire"]||[]).push([[6802],{17818:function(e,t,r){r.d(t,{Z:function(){return d}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"meClass"},[e.topgroup.children&&e.topgroup.children.length>0?t("div",{staticClass:"grouproot"},[t("div",{staticClass:"group-header"},[e.topgroup.children.length>1?t("div",{staticClass:"logic-buttons"},[t("div",{class:{spanAnd:!0,logicOn:e.topgroup.logicop===e.pub.def.LogicOp.LogicOpAnd},on:{click:function(t){e.topgroup.logicop=e.pub.def.LogicOp.LogicOpAnd}}},[e._v(e._s(e.$t("message.且"))),t("span")]),t("div",{class:{spanOr:!0,logicOn:e.topgroup.logicop===e.pub.def.LogicOp.LogicOpOr},on:{click:function(t){e.topgroup.logicop=e.pub.def.LogicOp.LogicOpOr}}},[e._v(e._s(e.$t("message.或"))),t("span")])]):e._e()]),t("div",{staticClass:"condContainer"},e._l(e.topgroup.children,(function(r,l){return t("div",{key:r.id},[r.children&&r.children.length>0?t("div",{staticClass:"grouproot"},[t("div",{staticClass:"group-header"},[r.children.length>1?t("div",{staticClass:"logic-buttons"},[t("div",{class:{spanAnd:!0,logicOn:r.logicop===e.pub.def.LogicOp.LogicOpAnd},on:{click:function(t){r.logicop=e.pub.def.LogicOp.LogicOpAnd}}},[e._v(e._s(e.$t("message.且"))),t("span")]),t("div",{class:{spanOr:!0,logicOn:r.logicop===e.pub.def.LogicOp.LogicOpOr},on:{click:function(t){r.logicop=e.pub.def.LogicOp.LogicOpOr}}},[e._v(e._s(e.$t("message.或"))),t("span")])]):e._e()]),t("div",{staticClass:"condContainer"},e._l(e.topgroup.children[l].children,(function(a,o){return t("div",{key:a.id},[e._t("default",(function(){return[e._v(e._s(r)+" "+e._s(o))]}),{item:a,parent:e.topgroup.children[l]})],2)})),0)]):t("div",[e._t("default",(function(){return[e._v(e._s(r))]}),{item:r,parent:e.topgroup})],2)])})),0)]):e._e()])},a=[],o=r(794),i={components:{},props:{keepLast:{type:Boolean,default:!0},group:{type:Object,default:function(){return{logicop:o.Z.def.LogicOp.LogicOpAnd,children:[{id:1,label:"label1",name:"namelabel1"},{id:2,label:"label2",name:"namelabel2"},{id:3,label:"label3",name:"namelabel3",logicop:o.Z.def.LogicOp.LogicOpAnd,children:[{id:3,label:"label1",name:"namelabel1"},{id:2,label:"label2",name:"namelabel2"}]}]}}},subjects:{type:Array,default:()=>[]}},data(){return{topgroup:{}}},created(){this.topgroup=this.group},mounted(){},methods:{},computed:{}},p=i,n=r(1001),s=(0,n.Z)(p,l,a,!1,null,"c6cbd6c8",null),d=s.exports},90309:function(e,t,r){r.d(t,{Z:function(){return u}});var l=function(){var e=this,t=e._self._c;return t("div",{staticClass:"meClass"},[t("div",[t("ConditionGroup",{attrs:{group:e.filterable},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",{staticClass:"condItem"},[t("PropCondition",{staticClass:"pading2",attrs:{favorites:e.favorites,eventProps:e.eventProps,userProps:e.userProps,userGroups:e.userGroups,userTags:e.userTags},on:{change:e.on_change_condition},model:{value:r.item.record,callback:function(t){e.$set(r.item,"record",t)},expression:"slotProps.item.record"}}),t("span",{on:{click:function(t){return e.on_click_add(e.filterable,r.item.id,r.item.level)}}},[t("el-tooltip",{attrs:{effect:"light",placement:"top",content:e.$t("message.添加条件")}},[t("b-icon",{staticClass:"condIcon",attrs:{icon:"filter-variant-plus",size:"is-small"}})],1)],1),!e.keepLast||e.groupItemCount(e.filterable)>1?t("span",{on:{click:function(t){return e.on_click_trash(e.filterable,r.item.id)}}},[t("el-tooltip",{attrs:{effect:"light",placement:"top",content:e.$t("message.删除条件")}},[t("b-icon",{staticClass:"condIcon",attrs:{icon:"trash-can-outline",size:"is-small"}})],1)],1):e._e()],1)]}}])})],1)])},a=[],o=r(97461),i=r(17818),p=r(794),n={components:{PropCondition:o.Z,ConditionGroup:i.Z},model:{prop:"filters",event:"filterschange"},props:{keepLast:{type:Boolean,default:!0},favorites:{type:String,default:"aa"},filters:{type:Object,default:function(){return{logicop:p.Z.def.LogicOp.LogicOpAnd,children:[{id:1,label:"label1",record:{pickersubject:{}}}]}}},eventProps:{type:Array,default:()=>[{value:"FAIL",label:"累计购买次数",label2:p.Z.def.PropertyType.getZhLabel(p.Z.def.PropertyType.PropertyTypeCustom),type:p.Z.def.DataType.DataTypeNumber},{value:"rank",label:"排名",label2:p.Z.def.PropertyType.getZhLabel(p.Z.def.PropertyType.PropertyTypeCustom),type:p.Z.def.DataType.DataTypeNumber},{value:"guild_name",label:"用户名字",label2:p.Z.def.PropertyType.getZhLabel(p.Z.def.PropertyType.PropertyTypeCustom),type:p.Z.def.DataType.DataTypeString},{value:"guild_member",label:"年龄",label2:p.Z.def.PropertyType.getZhLabel(p.Z.def.PropertyType.PropertyTypeCustom),type:p.Z.def.DataType.DataTypeNumber},{value:"guild_leader",label:"性别",label2:p.Z.def.PropertyType.getZhLabel(p.Z.def.PropertyType.PropertyTypeCustom),type:p.Z.def.DataType.DataTypeString},{value:"win",label:"胜利次数",label2:p.Z.def.PropertyType.getZhLabel(p.Z.def.PropertyType.PropertyTypeCustom),type:p.Z.def.DataType.DataTypeNumber}]},userProps:{type:Array,default:()=>[{value:"FAIL",label:"累计购买次数",label2:p.Z.def.PropertyType.getZhLabel(p.Z.def.PropertyType.PropertyTypeCustom),type:p.Z.def.DataType.DataTypeNumber},{value:"rank",label:"排名",label2:p.Z.def.PropertyType.getZhLabel(p.Z.def.PropertyType.PropertyTypeCustom),type:p.Z.def.DataType.DataTypeNumber},{value:"guild_name",label:"用户名字",label2:p.Z.def.PropertyType.getZhLabel(p.Z.def.PropertyType.PropertyTypeCustom),type:p.Z.def.DataType.DataTypeString},{value:"guild_member",label:"年龄",label2:p.Z.def.PropertyType.getZhLabel(p.Z.def.PropertyType.PropertyTypeCustom),type:p.Z.def.DataType.DataTypeNumber},{value:"guild_leader",label:"性别",label2:p.Z.def.PropertyType.getZhLabel(p.Z.def.PropertyType.PropertyTypeCustom),type:p.Z.def.DataType.DataTypeString},{value:"win",label:"胜利次数",label2:p.Z.def.PropertyType.getZhLabel(p.Z.def.PropertyType.PropertyTypeCustom),type:p.Z.def.DataType.DataTypeNumber}]},userGroups:{type:Array,default:()=>[]},userTags:{type:Array,default:()=>[]}},data(){return{selectedEvent:"",filterable:{}}},created(){this.filterable=this.filters},mounted(){},watch:{filters(e,t){p.Z.utils.Ignore(t),this.filterable.children=e.children,this.filterable.logicop=e.logicop},eventProps(e,t){p.Z.utils.Ignore(e,t)}},methods:{on_click_add(e,t,r){p.Z.condx.GroupAdd(e,t,r,{record:{pickersubject:{}}})},on_click_trash(e,t){p.Z.condx.GroupRemove(e,t)},onMetricChange(e,t,r,l){p.Z.utils.Ignore(e,t,r,l)},on_event_change(e){this.selectedEvent=e},on_change_condition(e){p.Z.utils.Ignore(e)},groupItemCount(e){return p.Z.condx.GroupItemCount(e)}}},s=n,d=r(1001),c=(0,d.Z)(s,l,a,!1,null,"b60fea14",null),u=c.exports},66802:function(e,t,r){r.r(t),r.d(t,{default:function(){return f}});var l=function(){var e=this,t=e._self._c;return t("div",[t("el-select",{staticClass:"mr10",attrs:{size:"mini","default-first-option":!0,placeholder:e.$t("message.请选择")},on:{change:e.on_change_event},model:{value:e.selectedEvent,callback:function(t){e.selectedEvent=t},expression:"selectedEvent"}},e._l(e.EventList,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("PropConditionGroup",{attrs:{favorites:"favorites1687942161",keepLast:!1,filters:e.filters4,eventProps:e.eventProps4}}),t("el-button",{on:{click:function(t){return e.AddCond(e.filters4)}}},[e._v("添加条件")]),t("el-divider"),t("PropConditionGroup",{attrs:{favorites:"",filters:e.filters1,eventProps:e.eventProps1}}),t("el-button",{on:{click:function(t){return e.AddCond(e.filters1)}}},[e._v("添加条件")]),t("el-divider"),t("PropConditionGroup",{attrs:{favorites:"favorites1687942160",keepLast:!1,filters:e.filters2,eventProps:e.eventProps2}}),t("el-button",{on:{click:function(t){return e.AddCond(e.filters2)}}},[e._v("添加条件")]),t("el-button",{on:{click:function(t){return e.ResetCond(e.filters2)}}},[e._v("重置")]),t("el-divider"),t("PropConditionGroup",{attrs:{favorites:"favorites1687942161",keepLast:!1,filters:e.filters3,eventProps:e.eventProps1}}),t("el-button",{on:{click:function(t){return e.AddCond(e.filters3)}}},[e._v("添加条件")]),t("el-divider")],1)},a=[],o=r(794),i=r(62147),p=r(63822),n=r(90309),s={components:{PropConditionGroup:n.Z},data(){return{filters1:{logicop:o.Z.def.LogicOp.LogicOpAnd,children:[]},filters2:{logicop:o.Z.def.LogicOp.LogicOpAnd,children:[{id:1,selectedOp:"=",record:{}}]},filters3:{logicop:"and",children:[{level:1,id:1,logicop:"and",children:[{id:2,selectedOp:"=",record:{pickersubject:{value:"guild_leader11",label:"会长11",type:"string",label3:"文本",is_favorite:!1},params:["assadf"],selectedOp:"="},level:2},{record:{pickersubject:{value:"createtime11",label:"创建日期11",type:"datetime",label3:"时间",is_favorite:!1},params:["2023-06-28 00:00:00"],selectedOp:">="},id:3,level:2}]},{selectedOp:"=",record:{pickersubject:{value:"guild_member11",label:"公会人数11",type:"number",label3:"数值",is_favorite:!1},params:["1212"],selectedOp:"="},id:4,level:1},{level:1,id:5,logicop:"and",children:[{selectedOp:"=",record:{pickersubject:{value:"rank11",label:"排名11",type:"number",label3:"数值",is_favorite:!1},params:["1"],selectedOp:"="},id:6,level:2},{record:{pickersubject:{value:"win11",label:"胜利次数11",type:"number",label3:"数值",is_favorite:!1},params:[1],selectedOp:">"},id:8,level:2}]},{selectedOp:"=",record:{pickersubject:{value:"FAIL11",label:"失败次数11",type:"number",label3:"数值",is_favorite:!1},params:[],selectedOp:"="},id:7,level:1}]},filters4:{logicop:o.Z.def.LogicOp.LogicOpAnd,children:[]},eventProps2:[],eventProps1:[{value:"FAIL11",label:"失败次数11",type:o.Z.def.DataType.DataTypeNumber},{value:"rank11",label:"排名11",type:o.Z.def.DataType.DataTypeNumber},{value:"guild_name11",label:"公会名字11",type:o.Z.def.DataType.DataTypeString},{value:"guild_member11",label:"公会人数11",type:o.Z.def.DataType.DataTypeNumber},{value:"guild_leader11",label:"会长11",type:o.Z.def.DataType.DataTypeString},{value:"win11",label:"胜利次数11",type:o.Z.def.DataType.DataTypeNumber},{value:"createtime11",label:"创建日期11",type:o.Z.def.DataType.DataTypeDatetime}],selectedEvent:"",eventProps4:[],UserPropList:[],EventList:[],UserGroupList:[],UserTagList:[]}},created(){this.initialize()},methods:{initialize(){var e=this.getCurrAppId(),t=i.Z.api.LoadUserProp(e),r=i.Z.api.LoadPlainEventList(e),l=i.Z.api.LoadUserClusterList(e),a=i.Z.api.LoadUserTagList(e,!0),p=Promise.all([t,r,l,a]);p.then((e=>{console.log("res--------:",e),this.UserPropList=e[0],this.EventList=e[1],this.UserGroupList=e[2],this.UserTagList=e[3],this.eventListLoadOk=!0;var t=this.$route.params;this.editing=!o.Z.utils.IsEmptyObj(t.client_data)})).catch((e=>{o.Z.utils.Err(this,e)}))},AddCond(e){o.Z.condx.GroupAdd(e,0,1,{selectedOp:"=",record:{}})},ResetCond(e){o.Z.condx.GroupClear(e)},on_change_event(e){console.log("on_change_event",e),this.filters4.children=[],this.eventProps4=[],this.loadEventProp(e,"")},loadEventProp(e){var t=this.getCurrAppId();i.Z.api.LoadEventPropParamPromise({app_id:t,include_obj_schema:!0,include_dim_schema:!0,include_obj_dim_schema:!0,limit_event_name:[e]}).then((t=>{console.log("LoadEventPropParamPromise--loadEventProp---",t),this.eventProps4=t;for(var r=0;r<this.eventProps4.length;r++)this.eventProps4[r].label=this.eventProps4[r].label+String(this.eventProps4.length)+"-"+e}))}},computed:{...(0,p.Se)({getCurrAppId:"system/getCurrAppId"})}},d=s,c=r(1001),u=(0,c.Z)(d,l,a,!1,null,null,null),f=u.exports}}]);
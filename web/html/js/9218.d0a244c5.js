(self["webpackChunkwildfire"]=self["webpackChunkwildfire"]||[]).push([[9218],{74855:function(e,t,i){"use strict";i.d(t,{Z:function(){return p}});var a=function(){var e=this,t=e._self._c;return t("span",{ref:"me"},[t("input",{staticClass:"inputDefaultClass",class:{titleSize:e.isTitle,mediumSize:e.isMedium,smallSize:e.isSmall,miniSize:e.isMini,fieldValue:!0,fieldControl:!0,warningBorder:e.isInvalid},attrs:{type:"text",placeholder:e.inputPlaceHolder},domProps:{value:e.valueText},on:{change:e.changeEvent}}),t("el-input",{staticStyle:{position:"fixed",width:"2000px",transform:"translateY(-9999px)"},attrs:{size:e.fontSize,readonly:""}},[t("span",{ref:"autowidthspan",class:{titleSize:e.isTitle},attrs:{slot:"prefix"},slot:"prefix"},[e._v(e._s(e.autowidthspanText))])])],1)},s=[],r=i(794),l={name:"EditLabel",model:{prop:"value",event:"input"},props:{value:{type:String},inputPlaceHolder:{String:String},isInvalid:{type:Boolean,default:!1},fontSize:{type:String,default:"medium"},autoWidth:{type:Boolean,default:!0}},data(){return{valueText:""}},watch:{value(e){this.valueText=e,this.$emit("change",e),this.autoWidthAdjust()}},created(){this.valueText=this.value},mounted(){this.autoWidthAdjust()},methods:{changeEvent(e){this.valueText=e.target.value,this.$emit("input",e.target.value),this.$emit("change",e.target.value),this.autoWidthAdjust()},autoWidthAdjust(e){this.autoWidth&&(r.Z.utils.Ignore(e),setTimeout((()=>{if(this.$refs.autowidthspan){var e=this.$refs.autowidthspan.getClientRects(),t=this.$refs.me,i=t.getElementsByClassName("inputDefaultClass")[0];if(e.length>0){var a=e[0].width+12;r.Z.utils.IsEmptyStr(this.inputPrefixIcon)||(a+=25),r.Z.utils.IsEmptyStr(this.inputSuffixIcon)||(a+=25),i.style.width=a+"px"}}}),10))}},computed:{autowidthspanText:function(){return this.valueText&&this.valueText.length>0?this.valueText:this.inputPlaceHolder},isMedium(){return"medium"==r.Z.utils.UnifiedElementFontSize(this.fontSize)},isSmall(){return"small"==r.Z.utils.UnifiedElementFontSize(this.fontSize)},isMini(){return"mini"==r.Z.utils.UnifiedElementFontSize(this.fontSize)},isTitle(){return"title"==this.fontSize}}},n=l,o=i(1001),c=(0,o.Z)(n,a,s,!1,null,"4dd8e01e",null),p=c.exports},60045:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return M}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"root"},[t("div",{staticClass:"containerClass"},[t("div",{staticClass:"top_toolbar h40"},[t("div",[e.name?t("EditLabel",{staticClass:"h40 ml10",attrs:{fontSize:"title"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}):t("span",{staticClass:"title h40 ml10 nonuserselect"},[e._v(e._s(e.$t("message.属性分析")))])],1),t("div",{staticClass:"top_toolbar_erea"},[t("el-select",{staticClass:"mr10 w100",attrs:{size:"mini",placeholder:e.$t("message.请选择默认分析时区")},model:{value:e.zone,callback:function(t){e.zone=t},expression:"zone"}},e._l(e.zones,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),t("div",{staticClass:"ml10 w100 h30"},[t("b-button",{attrs:{type:"is-primary",size:"is-small",expanded:""},on:{click:function(t){return e.on_click_save(e.id)}}},[e._v(e._s(e.$t("message.保存")))]),t("SaveAnalysis",{ref:"saveAnalysis",on:{sucess:e.on_save_success}})],1),e.id>0?t("div",{staticClass:"ml10 w100 h30"},[t("b-button",{attrs:{type:"is-primary",size:"is-small",expanded:""},on:{click:function(t){return e.on_click_save(0)}}},[e._v(e._s(e.$t("message.另存为")))])],1):e._e(),t("div",{staticClass:"ml10 w100 h30"},[t("b-button",{attrs:{type:"is-primary",size:"is-small",expanded:""},on:{click:e.on_click_analyze}},[e._v(e._s(e.$t("message.计算")))])],1)],1)]),t("splitpanes",{staticClass:"default-theme"},[t("pane",{attrs:{size:e.paneSize,"max-size":"60"}},[t("div",{staticClass:"left-root"},[t("div",{staticClass:"left-work-area onSliderScroll"},[t("div",{staticClass:"title_area"},[t("div",{staticClass:"rowLeftCenter nonuserselect"},[e._v(e._s(e.$t("message.指标")))]),t("div",{staticClass:"title_area_button"})]),t("div",[t("div",{staticClass:"ml20"},[e.restoringData?e._e():t("SelectPicker",{staticClass:"mr5",attrs:{tabGroups:e.UserPropListForAnalysis,favorites:""},on:{change:e.on_change_analysis_prop},model:{value:e.analysisUserProp,callback:function(t){e.analysisUserProp=t},expression:"analysisUserProp"}}),e._v(" "+e._s(e.$t("message.的"))),t("el-select",{staticClass:"w85 ml5",attrs:{size:"mini"},model:{value:e.metricFunc,callback:function(t){e.metricFunc=t},expression:"metricFunc"}},e._l(e.availableMetric,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),t("div",{staticClass:"title_area nonuserselect",on:{click:e.addGlobalFilter}},[e._v(e._s(e.$t("message.全局筛选"))+" "),t("div",{staticClass:"title_area_button"},[t("div",[t("el-tooltip",{attrs:{effect:"light",placement:"top",content:e.$t("message.添加全局筛选")}},[t("b-icon",{staticClass:"span_button",attrs:{"custom-size":"mdi-18px",size:"default",icon:"plus"}})],1)],1),t("b-icon",{staticClass:"span_button",attrs:{"custom-size":"mdi-18px",size:"default",icon:""}})],1)]),t("div",[t("PropConditionGroup",{attrs:{eventProps:[],keepLast:!1,userProps:e.UserPropList,userGroups:e.UserGroupList,userTags:e.UserTagList},model:{value:e.GlobalFilter,callback:function(t){e.GlobalFilter=t},expression:"GlobalFilter"}})],1),t("div",{staticClass:"title_area nonuserselect",on:{click:e.addGroupby}},[e._v(e._s(e.$t("message.分组"))),t("div",{staticClass:"title_area_button"},[t("div",[t("el-tooltip",{attrs:{effect:"light",placement:"top",content:e.$t("message.添加分组")}},[t("b-icon",{staticClass:"span_button",attrs:{"custom-size":"mdi-18px",size:"default",icon:"plus"}})],1)],1),t("b-icon",{staticClass:"span_button",attrs:{"custom-size":"mdi-18px",size:"default",icon:""}})],1)]),t("div",[t("draggable",e._b({staticClass:"list-group",attrs:{tag:"ul"},on:{end:e.afterGroupbyDrag},model:{value:e.Groupbys.children,callback:function(t){e.$set(e.Groupbys,"children",t)},expression:"Groupbys.children"}},"draggable",e.dragOptions,!1),[t("transition-group",{attrs:{type:"transition"}},e._l(e.Groupbys.children,(function(i){return t("li",{key:i.id,staticClass:"list-group-item"},[t("div",{staticClass:"matricLabelClass"},[t("b-icon",{staticClass:"dragicon",attrs:{icon:"drag"}}),t("div",{staticClass:"groupyicon"},[t("el-avatar",{staticClass:"elavatarclass",attrs:{size:18,shape:"square"}},[e._v(e._s(i.id))])],1),t("GroupbyCondition",{attrs:{tabGroups:e.tabGroups},model:{value:i.groupbyfield,callback:function(t){e.$set(i,"groupbyfield",t)},expression:"element.groupbyfield"}}),t("span",{on:{click:function(t){return e.deleteGroupby(i.id)}}},[t("el-tooltip",{attrs:{effect:"light",placement:"top",content:e.$t("message.删除")}},[t("b-icon",{staticClass:"iconClass",attrs:{icon:"close-circle",size:"is-small"}})],1)],1)],1)])})),0)],1)],1)])])]),t("pane",{attrs:{size:100-e.paneSize}},[t("div",{staticClass:"chart_root"},[t("div",{staticClass:"chart_toolbar"},[t("div",{staticClass:"chart_toolbar_left"}),t("div",{staticClass:"chart_toolbar_right"},[t("div",{class:{svgicon_button:!0,activeIcon:!e.hideTable},on:{click:function(t){e.hideTable=!e.hideTable}}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:e.$t("message.表格"),placement:"bottom-end"}},[t("div",[t("inline-svg",{attrs:{width:"16",height:"16",src:i(69793)}})],1)])],1),e._l(e.availableChartList,(function(a){return t("div",{key:a.value,class:{svgicon_button:!0,activeIcon:!e.hideChart&&e.currentChart==a.value},on:{click:function(t){return e.switchChartType(a.value)}}},[t("el-tooltip",{staticClass:"item",attrs:{effect:"light",content:a.label,placement:"bottom-end"}},[t("div",[t("inline-svg",{attrs:{width:"16",height:"16",src:i(97773)("./"+a.icon+".svg")}})],1)])],1)}))],2)]),e.tableDataLoading?t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.tableDataLoading,expression:"tableDataLoading"}],staticClass:"mh100"}):[e.hideChart?e._e():t("div",{staticClass:"chartDiv",attrs:{id:"chartViewContainer"}},[e.loadTableDataOnce?t("ChartView",{attrs:{option:e.chartOption,containerId:"chartViewContainer"}}):e._e()],1),e.loadTableDataOnce&&!e.hideTable?t("TablePlusSummaryCellEdit",{attrs:{enableSummary:!0,loading:e.tableDataLoading},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}}):e._e()]],2)])],1)],1)])},s=[],r=(i(57658),i(83581)),l=i(74855),n=i(90309),o=i(43782),c=i(36144),p=i(43436),u=i(76983),d=i.n(u),h=i(63822),m=i(47056),y=i(794),b=i(62147),f=i(95705),g=i(19976),v=i(99877),T=i(9989),_={components:{Splitpanes:r.F,Pane:r.X,ChartView:f.Z,SaveAnalysis:g.Z,SelectPicker:p.Z,InlineSvg:v.ZP,draggable:d(),EditLabel:l.Z,PropConditionGroup:n.Z,GroupbyCondition:o.Z,TablePlusSummaryCellEdit:c.Z},created(){},mounted(){this.loadMetrics(),this.initialize()},data:()=>({zones:[],UserPropList:[],UserGroupList:[],UserTagList:[],UserPropListForAnalysis:[],metrics:{},availableChartList:[],report_id:0,id:0,name:"",isDragging:!1,active:!1,paneSize:45,zone:y.Z.def.TimeZone.Utcp8,GlobalFilter:{logicop:y.Z.def.LogicOp.LogicOpAnd,children:[]},Groupbys:{children:[]},tableData:{},tableDataLoading:!1,loadTableDataOnce:!1,availableMetric:[],metricFunc:"",analysisUserProp:{},distriSet:{Mode:"action",Grain:"day",distriParam:{distributeOption:y.Z.def.DistributeOption.DistributeOptionDefault,numberList:[]}},hideTable:!1,hideChart:!1,restoringData:!1,chartOption:{},tempLastPost:"",respData:{},currentChart:y.Z.def.ChartType.Line,chartDataSet:{},chartViewContainer:""}),methods:{loadMetrics(){var e={value:y.Z.def.MetricType.MetricTypeNumberSum,label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberSum)},t={value:y.Z.def.MetricType.MetricTypeNumberMax,label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberMax)},i={value:y.Z.def.MetricType.MetricTypeNumberMin,label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberMin)},a={value:y.Z.def.MetricType.MetricTypeNumberAvg,label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberAvg)},s={value:y.Z.def.MetricType.MetricTypeCountDistinctProp,label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeCountDistinctProp)},r={value:y.Z.def.MetricType.MetricTypeNumberVarsamp,label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberVarsamp)},l={value:y.Z.def.MetricType.MetricTypeNumberStdsamp,label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberStdsamp)},n={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"99",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"99")},o={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"95",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"95")},c={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"90",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"90")},p={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"80",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"80")},u={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"75",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"75")},d={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"70",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"70")},h={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"60",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"60")},m={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"50",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"50")},b={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"40",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"40")},f={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"30",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"30")},g={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"25",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"25")},v={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"20",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"20")},T={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"10",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"10")},_={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"5",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"5")},Z={value:y.Z.def.MetricType.MetricTypeNumberQuantile+"1",label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeNumberQuantile+"1")},L={value:y.Z.def.MetricType.MetricTypeListSetdistinct,label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeListSetdistinct)},C={value:y.Z.def.MetricType.MetricTypeListEledistinct,label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeListEledistinct)},M={value:y.Z.def.MetricType.MetricTypeBoolTrue,label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeBoolTrue)},D={value:y.Z.def.MetricType.MetricTypeBoolFalse,label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeBoolFalse)},k={value:y.Z.def.MetricType.MetricTypeBoolNil,label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeBoolNil)},S={value:y.Z.def.MetricType.MetricTypeBoolNotnil,label:y.Z.def.MetricType.getZhLabel(y.Z.def.MetricType.MetricTypeBoolNotnil)};this.metrics[y.Z.def.DataType.DataTypeString]=[s],this.metrics[y.Z.def.DataType.DataTypeBool]=[M,D,k,S],this.metrics[y.Z.def.DataType.DataTypeNumber]=[e,a,t,i,r,l,n,o,c,p,u,d,h,m,b,f,g,v,T,_,Z],this.metrics[y.Z.def.DataType.DataTypeDatetime]=[s],this.metrics[y.Z.def.DataType.DataTypeObject]=[s],this.metrics[y.Z.def.DataType.DataTypeListString]=[L,C],this.metrics[y.Z.def.DataType.DataTypeListBool]=[L,C],this.metrics[y.Z.def.DataType.DataTypeListNumber]=[L,C],this.metrics[y.Z.def.DataType.DataTypeListDatetime]=[L,C],this.metrics[y.Z.def.DataType.DataTypeListObject]=[L,C],this.setAvailableMetric()},initialize(){this.availableChartList=b.Z.analysisProp.GetChartTypeList(),this.currentChart=y.Z.def.ChartType.Bar,this.loadZones();var e=this.getCurrAppId(),t=b.Z.api.LoadUserProp(e),i=b.Z.api.LoadUserClusterList(e),a=b.Z.api.LoadUserTagList(e,!0),s=Promise.all([t,i,a]);s.then((e=>{this.UserPropList=e[0],this.UserGroupList=e[1],this.UserTagList=e[2],this.UserGroupList.forEach((e=>{e.client_data=null,e.table_type=y.Z.def.TableType.TableTypeUser})),this.UserTagList.forEach((e=>{e.client_data=null,e.table_type=y.Z.def.TableType.TableTypeUser})),this.UserPropListForAnalysis=this.getUserPropListForAnalysis();var t=this.$route.params;t&&(this.report_id=t.report_id),t&&!y.Z.utils.IsEmptyObj(t.client_data)&&this.restoreClientData(t.client_data)})).catch((e=>{y.Z.utils.Err(this,e)}))},restoreClientData(e){this.restoringData=!0,this.id=e.id,this.name=e.name,this.isDragging=e.isDragging,this.active=e.active,this.paneSize=e.paneSize,this.zone=e.zone,this.GlobalFilter=e.GlobalFilter,this.Groupbys=e.Groupbys,this.availableMetric=e.availableMetric,this.metricFunc=e.metricFunc,this.analysisUserProp=e.analysisUserProp,this.distriSet=e.distriSet,this.tableDataLoading=!0,this.respData=e.respData,this.hideTable=!1,this.hideChart=!1,setTimeout((()=>{this.restoringData=!1,this.switchChartType(this.currentChart,!0)}),100)},loadZones(){this.zones.push({label:y.Z.def.TimeZone.getZhLabel(y.Z.def.TimeZone.Utcp8),value:y.Z.def.TimeZone.Utcp8});var e=-12;while(e<13)8!==e&&this.zones.push({label:y.Z.def.TimeZone.getZhLabel(e),value:e}),e+=1},getUserPropListForAnalysis(){var e=[];return this.UserPropList.filter((t=>{if(!y.Z.def.PropDelimiter.isRelateObjectField(t.type_prop_name)&&y.Z.def.DataType.isPrimaryType(t.type)){var i=y.Z.utils.DeepClone(t);i.label3=t.data_type_label,e.push(i)}})),[{group_name:this.$t("message.用户属性"),value:this.$t("message.用户属性"),type:"list",icon:"chart-timeline",children:e}]},on_change_metric(e,t){t.extra.metricText=t.text},addGlobalFilter(){y.Z.condx.GroupAdd(this.GlobalFilter,0,1,{selectedOp:"=",record:{}})},addGroupby(){y.Z.condx.GroupAdd(this.Groupbys,0,1,{})},deleteGroupby(e){y.Z.condx.GroupRemove(this.Groupbys,e)},afterGroupbyDrag(){for(var e=y.Z.utils.DeepClone(this.Groupbys),t=0;t<e.children.length;t++)e.children[t].id=t+1;this.Groupbys.children=[],setTimeout((()=>{this.Groupbys=e}),10)},setAvailableMetric(e){void 0===this.metrics[e]?this.availableMetric=this.metrics[y.Z.def.DataType.DataTypeString]:this.availableMetric=this.metrics[e],this.metricFunc=this.availableMetric[0].value},on_change_analysis_prop(e){this.Groupbys.children=[],this.GlobalFilter={logicop:y.Z.def.LogicOp.LogicOpAnd,children:[]},this.setAvailableMetric(e.type)},on_click_save(e){var t={},i=this.prepare_postdata(t);if(i)y.Z.utils.Err(this,i);else{var a={isDragging:this.isDragging,active:this.active,paneSize:this.paneSize,zone:this.zone,GlobalFilter:this.GlobalFilter,Groupbys:this.Groupbys,availableMetric:this.availableMetric,metricFunc:this.metricFunc,analysisUserProp:this.analysisUserProp,distriSet:this.distriSet,currentChart:this.currentChart};this.tempLastPost!=JSON.stringify(t)?this.QueryApi().then((()=>{this.$refs.saveAnalysis.showDialog(e,this.name,a,t,this.respData,y.Z.def.AnalysisType.AnalysisTypeProperty,0,this.report_id),this.tableDataLoading=!1})).catch(function(e){y.Z.utils.Err(this,e),this.tableDataLoading=!1}.bind(this)):(this.$refs.saveAnalysis.showDialog(e,this.name,a,t,this.respData,y.Z.def.AnalysisType.AnalysisTypeProperty,0,this.report_id),this.tableDataLoading=!1)}},on_save_success(e){this.name=e.name,this.id=e.id},prepare_postdata(e){e.app=this.getCurrAppId(),e.time_zone=this.zone,e.metric=b.Z.metric.VueEventMetricRecord2PropMetric(this.analysisUserProp,this.metricFunc),e.comm_filter=b.Z.metric.VuePropFilterGroup2ApiGlobalFilter(this.GlobalFilter),e.breaks=b.Z.breaks.VueGroupbys2ApiBreakList("",this.Groupbys)},QueryApi(){var e={},t=this.prepare_postdata(e);return t?Promise.reject(t):(this.tableDataLoading=!0,this.tableData={},this.tempLastPost=JSON.stringify(e),m.Z["new"]().analyzeProp(e).then(function(e){y.Z.utils.Ignore(e),this.respData=e.data,this.tableData=b.Z.analysisProp.ToTabledata(e.data);var t=b.Z.analysisProp.datasetToChartDataset(e.data);return this.chartDataSet=T.Z.TableDataToChartSetList(t),this.chartOption=b.Z.BuidChart(this.currentChart,y.Z.utils.DeepClone(this.chartDataSet)),this.tableDataLoading=!1,this.loadTableDataOnce=!0,!0}.bind(this)))},on_click_analyze(){this.QueryApi().catch(function(e){y.Z.utils.Err(this,e),this.tableDataLoading=!1}.bind(this))},switchChartType(e,t){e==this.currentChart&&(this.hideChart=!this.hideChart),this.currentChart=e,t&&(this.hideChart=!1),this.hideChart||(this.tableDataLoading=!0,this.$nextTick((()=>{this.tableData=b.Z.analysisProp.ToTabledata(this.respData);var e=b.Z.analysisProp.datasetToChartDataset(this.respData);this.chartDataSet=T.Z.TableDataToChartSetList(e),this.chartOption=b.Z.BuidChart(this.currentChart,y.Z.utils.DeepClone(this.chartDataSet)),this.tableDataLoading=!1,this.loadTableDataOnce=!0})))}},computed:{...(0,h.Se)({getCurrAppId:"system/getCurrAppId"}),dragOptions(){return{animation:0,group:"description",disabled:!1,ghostClass:"ghost"}},tabGroups:function(){return b.Z.filtersub.MakeTabGroup([],this.UserPropList,this.UserGroupList,this.UserTagList)}}},Z=_,L=i(1001),C=(0,L.Z)(Z,a,s,!1,null,"dddc66e6",null),M=C.exports},17818:function(e,t,i){"use strict";i.d(t,{Z:function(){return p}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"meClass"},[e.topgroup.children&&e.topgroup.children.length>0?t("div",{staticClass:"grouproot"},[t("div",{staticClass:"group-header"},[e.topgroup.children.length>1?t("div",{staticClass:"logic-buttons"},[t("div",{class:{spanAnd:!0,logicOn:e.topgroup.logicop===e.pub.def.LogicOp.LogicOpAnd},on:{click:function(t){e.topgroup.logicop=e.pub.def.LogicOp.LogicOpAnd}}},[e._v(e._s(e.$t("message.且"))),t("span")]),t("div",{class:{spanOr:!0,logicOn:e.topgroup.logicop===e.pub.def.LogicOp.LogicOpOr},on:{click:function(t){e.topgroup.logicop=e.pub.def.LogicOp.LogicOpOr}}},[e._v(e._s(e.$t("message.或"))),t("span")])]):e._e()]),t("div",{staticClass:"condContainer"},e._l(e.topgroup.children,(function(i,a){return t("div",{key:i.id},[i.children&&i.children.length>0?t("div",{staticClass:"grouproot"},[t("div",{staticClass:"group-header"},[i.children.length>1?t("div",{staticClass:"logic-buttons"},[t("div",{class:{spanAnd:!0,logicOn:i.logicop===e.pub.def.LogicOp.LogicOpAnd},on:{click:function(t){i.logicop=e.pub.def.LogicOp.LogicOpAnd}}},[e._v(e._s(e.$t("message.且"))),t("span")]),t("div",{class:{spanOr:!0,logicOn:i.logicop===e.pub.def.LogicOp.LogicOpOr},on:{click:function(t){i.logicop=e.pub.def.LogicOp.LogicOpOr}}},[e._v(e._s(e.$t("message.或"))),t("span")])]):e._e()]),t("div",{staticClass:"condContainer"},e._l(e.topgroup.children[a].children,(function(s,r){return t("div",{key:s.id},[e._t("default",(function(){return[e._v(e._s(i)+" "+e._s(r))]}),{item:s,parent:e.topgroup.children[a]})],2)})),0)]):t("div",[e._t("default",(function(){return[e._v(e._s(i))]}),{item:i,parent:e.topgroup})],2)])})),0)]):e._e()])},s=[],r=i(794),l={components:{},props:{keepLast:{type:Boolean,default:!0},group:{type:Object,default:function(){return{logicop:r.Z.def.LogicOp.LogicOpAnd,children:[{id:1,label:"label1",name:"namelabel1"},{id:2,label:"label2",name:"namelabel2"},{id:3,label:"label3",name:"namelabel3",logicop:r.Z.def.LogicOp.LogicOpAnd,children:[{id:3,label:"label1",name:"namelabel1"},{id:2,label:"label2",name:"namelabel2"}]}]}}},subjects:{type:Array,default:()=>[]}},data(){return{topgroup:{}}},created(){this.topgroup=this.group},mounted(){},methods:{},computed:{}},n=l,o=i(1001),c=(0,o.Z)(n,a,s,!1,null,"c6cbd6c8",null),p=c.exports},43782:function(e,t,i){"use strict";i.d(t,{Z:function(){return h}});var a=function(){var e=this,t=e._self._c;return t("div",{ref:"me",attrs:{id:"crf_groupbycondition"}},[t("div",{staticClass:"flexrowAcenter"},[t("SelectPicker",{attrs:{defaulted:e.defaulted,tabGroups:e.tabGroups},on:{pickviewshow:e.on_picker_show,change:e.on_select_change},model:{value:e.editing_field,callback:function(t){e.editing_field=t},expression:"editing_field"}}),e.showSettingIcon(e.editing_field)?t("div",{on:{click:function(t){e.viewshow=!0}}},[t("b-icon",{staticClass:"setIcon ml5",attrs:{icon:"cog-outline",size:"is-small"}})],1):e._e()],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.viewshow,expression:"viewshow"}],staticClass:"groupbypickview"},[t("div",{staticClass:"groupbypicktitle"},[e._v(e._s(e.$t("message.分组方式-列表")))]),e.isBasicListType(e.editing_field)?t("div",[t("el-radio-group",{on:{input:e.on_breakOption_change},model:{value:e.breakOption,callback:function(t){e.breakOption=t},expression:"breakOption"}},[t("el-radio",{attrs:{size:e.fontSize,label:e.pub.def.BreakOption.BreakOptionListWhole}},[e._v(e._s(e.$t("message.按值")))]),t("el-radio",{attrs:{size:e.fontSize,label:e.pub.def.BreakOption.BreakOptionListElement}},[e._v(e._s(e.$t("message.按元素")))]),t("el-radio",{attrs:{size:e.fontSize,label:e.pub.def.BreakOption.BreakOptionListSet}},[e._v(e._s(e.$t("message.按元素集合")))])],1)],1):e._e(),e.isDateTimeType(e.editing_field)?t("div",{staticClass:"h40 flexrowAcenter"},[t("el-radio-group",{on:{input:e.on_radio_change_time},model:{value:e.timeSummary,callback:function(t){e.timeSummary=t},expression:"timeSummary"}},[t("el-radio",{attrs:{size:e.fontSize,label:e.PERIOD_SUMMARY_NO}},[e._v(e._s(e.$t("message.不汇总")))]),t("el-radio",{attrs:{size:e.fontSize,label:e.PERIOD_SUMMARY_YES}},[e._v(e._s(e.$t("message.按时段汇总")))])],1),e.timeSummary==e.PERIOD_SUMMARY_YES?t("div",{staticClass:"flexrowAcenter ml5"},[t("b-select",{staticClass:"w100",attrs:{size:"is-small"},on:{input:e.on_breakOption_change},model:{value:e.breakOption,callback:function(t){e.breakOption=t},expression:"breakOption"}},e._l(e.timePeriodOp,(function(i){return t("option",{key:i.value,domProps:{value:i.value}},[e._v(" "+e._s(i.label)+" ")])})),0)],1):e._e()],1):e._e(),e.isNumberType(e.editing_field)?t("div",[t("el-radio-group",{on:{input:e.on_breakOption_change},model:{value:e.breakOption,callback:function(t){e.breakOption=t},expression:"breakOption"}},[t("el-radio",{attrs:{size:e.fontSize,label:e.pub.def.BreakOption.BreakOptionNumberDefault}},[e._v(e._s(e.$t("message.默认区间")))]),t("el-radio",{attrs:{size:e.fontSize,label:e.pub.def.BreakOption.BreakOptionNumberValue}},[e._v(e._s(e.$t("message.离散值(无区间)")))]),t("el-radio",{attrs:{size:e.fontSize,label:e.pub.def.BreakOption.BreakOptionNumberCustom}},[e._v(e._s(e.$t("message.自定义区间")))])],1),e.breakOption==e.pub.def.BreakOption.BreakOptionNumberCustom?t("div",{staticClass:"pickViewContent onSliderScroll"},e._l(e.numberList,(function(i,a){return t("div",{key:i.id,staticClass:"flexcolumnAleft"},[1===i.id?t("div",{staticClass:"flexrowJleftAcenter"},[t("div",{staticClass:"w50"},[e._v(e._s(e.$t("message.区间"))+e._s(a+1))]),t("div",{staticClass:"w15 flexcolumnAcenter"},[e._v("(")]),t("span",{staticClass:"w100"},[e._v(e._s(e.pub.def.Infinite.InfiniteMin))]),t("div",{staticClass:"w15 flexcolumnAcenter"},[e._v("-")]),t("el-input-number",{attrs:{size:"mini","controls-position":"right"},on:{change:function(t){return e.on_change_num(i)}},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"item.value"}}),t("div",{staticClass:"w15 flexcolumnAcenter"},[e._v(")")])],1):e._e(),1!=i.id?t("div",{staticClass:"flexrowJleftAcenter"},[t("div",{staticClass:"w50"},[e._v(e._s(e.$t("message.区间"))+e._s(a+1))]),t("div",{staticClass:"w15 flexcolumnAcenter"},[e._v("(")]),t("el-input",{staticClass:"w100",attrs:{value:e.get_previous_max(i),size:"mini",disabled:!0}}),t("div",{staticClass:"w15 flexcolumnAcenter"},[e._v("-")]),t("el-input-number",{attrs:{size:"mini","controls-position":"right"},on:{change:function(t){return e.on_change_num(i)}},model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"item.value"}}),t("div",{staticClass:"w15 flexcolumnAcenter"},[e._v(")")])],1):e._e(),i.id===e.numberList.length?t("div",{staticClass:"flexrowJleftAcenter"},[t("div",{staticClass:"w50"},[e._v(e._s(e.$t("message.区间"))+e._s(a+2))]),t("div",{staticClass:"w15 flexcolumnAcenter"},[e._v("(")]),t("el-input",{staticClass:"w100",attrs:{value:i.value,size:"mini",disabled:!0}}),t("div",{staticClass:"w15 flexcolumnAcenter"},[e._v("-")]),e._v(" "+e._s(e.pub.def.Infinite.InfiniteMax)+" "),t("div",{staticClass:"w15 flexcolumnAcenter"},[e._v(")")])],1):e._e()])})),0):e._e(),e.breakOption==e.pub.def.BreakOption.BreakOptionNumberCustom?t("div",{staticClass:"span_button",on:{click:e.addToList}},[t("b-icon",{attrs:{"custom-size":"mdi-18px",size:"default",icon:"plus"}}),e._v(e._s(e.$t("message.添加区间")))],1):e._e()],1):e._e()])])},s=[],r=(i(57658),i(794)),l=i(43436);const n="no",o="yes";var c={name:"DateTimePicker",components:{SelectPicker:l.Z},model:{prop:"modelvalue",event:"modelvaluechange"},props:{inputPlaceHolder:{type:String,default:"请选择日期"},modelvalue:{type:Object,default:function(){return{editing_field:{},breakOption:r.Z.def.BreakOption.BreakOptionListWhole,numberList:[{id:1,value:1}]}}},defaulted:{type:Boolean,default:!0},fontSize:{type:String,default:"mini"},setting:{type:Boolean,default:!0},tabGroups:{type:Array,default:()=>[]}},data(){return{PERIOD_SUMMARY_NO:"no",PERIOD_SUMMARY_YES:"yes",timeSummary:"no",eventListLoadOk:!1,timePeriodOp:[],editing_field:{},viewshow:!1,breakOption:r.Z.def.BreakOption.BreakOptionListWhole,numberList:[{id:1,value:1}]}},created(){this.initialize()},mounted(){(this.modelvalue&&this.modelvalue.length>12||this.modelvalue&&10===this.modelvalue.length)&&this.confirm(),document.addEventListener("click",this.dc,!0)},beforeDestroy(){document.removeEventListener("click",this.dc,!0)},methods:{initialize(){this.timePeriodOp=this.getTimePeriodList(),this.modelvalue&&(this.breakOption=this.modelvalue.breakOption,this.numberList=this.modelvalue.numberList,this.editing_field=this.modelvalue.editing_field)},confirm(){var e={};e.breakOption=this.breakOption,e.numberList=this.numberList,e.editing_field=this.editing_field,this.$emit("modelvaluechange",e)},dc(e){var t=this.$el.contains(e.target);t||(this.viewshow=!1)},on_breakOption_change(){console.log("====on_breakOption_change=========",this.breakOption),this.confirm()},getTimePeriodList(){var e=[];return e.push({value:r.Z.def.BreakOption.BreakOptionTimeMinute,label:this.$t("message.分钟")}),e.push({value:r.Z.def.BreakOption.BreakOptionTimeHour,label:this.$t("message.小时")}),e.push({value:r.Z.def.BreakOption.BreakOptionTimeDay,label:this.$t("message.天")}),e.push({value:r.Z.def.BreakOption.BreakOptionTimeWeek,label:this.$t("message.周")}),e.push({value:r.Z.def.BreakOption.BreakOptionTimeMonth,label:this.$t("message.月")}),e.push({value:r.Z.def.BreakOption.BreakOptionTimeYear,label:this.$t("message.年")}),e},addToList(){var e=this.numberList[this.numberList.length-1].value+1;this.numberList[this.numberList.length-1].max=e,this.numberList.push({id:this.numberList.length+1,value:e,min:e-1})},on_picker_show(e){e&&(this.viewshow=!1)},get_previous_max(e){if(e.id>1)return this.numberList[e.id-2].value},on_radio_change_time(e){console.log("====on_radio_change_time 1==========",e,this.breakOption),e==n?this.breakOption=r.Z.def.BreakOption.BreakOptionTimeSecond:e==o&&(this.breakOption=r.Z.def.BreakOption.BreakOptionTimeMinute),console.log("====on_radio_change_time 2==========",e,this.breakOption),this.confirm()},on_change_num(e){1==this.numberList.length||(e.id==this.numberList.length?e.value<=this.numberList[e.id-2].value&&setTimeout((()=>{e.value=this.numberList[e.id-2].value+1}),10):1==e.id?e.value>=this.numberList[e.id].value&&setTimeout((()=>{e.value=this.numberList[e.id].value-1}),10):(e.value>=this.numberList[e.id].value&&setTimeout((()=>{e.value=this.numberList[e.id].value-1}),10),e.value<=this.numberList[e.id-2].value&&setTimeout((()=>{e.value=this.numberList[e.id-2].value+1}),10))),this.confirm()},isDateTimeType(e){return!(!e||e.data_source_type!=r.Z.def.DataSourceType.DataSourceTypeEventProp&&e.data_source_type!=r.Z.def.DataSourceType.DataSourceTypeUserProp&&e.data_source_type!=r.Z.def.DataSourceType.DataSourceTypeUserTag||e.type!=r.Z.def.DataType.DataTypeDatetime)},isNumberType(e){return!(!e||e.data_source_type!=r.Z.def.DataSourceType.DataSourceTypeEventProp&&e.data_source_type!=r.Z.def.DataSourceType.DataSourceTypeUserProp&&e.data_source_type!=r.Z.def.DataSourceType.DataSourceTypeUserTag||e.type!=r.Z.def.DataType.DataTypeNumber)},isBasicListType(e){return!(!e||e.data_source_type!=r.Z.def.DataSourceType.DataSourceTypeEventProp&&e.data_source_type!=r.Z.def.DataSourceType.DataSourceTypeUserProp&&e.data_source_type!=r.Z.def.DataSourceType.DataSourceTypeUserTag||!r.Z.def.DataType.isBasicListType(e.type))},showSettingIcon(e){if(e)if(e.data_source_type==r.Z.def.DataSourceType.DataSourceTypeEventProp||e.data_source_type==r.Z.def.DataSourceType.DataSourceTypeUserProp||e.data_source_type==r.Z.def.DataSourceType.DataSourceTypeUserTag){if(e.type==r.Z.def.DataType.DataTypeNumber||e.type==r.Z.def.DataType.DataTypeDatetime)return!0;if(r.Z.def.DataType.isBasicListType(e.type))return!0}else e.data_source_type,r.Z.def.DataSourceType.DataSourceTypeUserCluster},on_select_change(e){this.breakOption=r.Z.def.BreakOption.BreakOptionNormal,this.isNumberType(e)?this.breakOption=r.Z.def.BreakOption.BreakOptionNumberDefault:this.isDateTimeType(e)?(this.timeSummary=this.PERIOD_SUMMARY_NO,this.breakOption=r.Z.def.BreakOption.BreakOptionTimeSecond):this.isBasicListType(e)&&(this.breakOption=r.Z.def.BreakOption.BreakOptionListWhole),this.editing_field=e,this.confirm()}},watch:{},computed:{}},p=c,u=i(1001),d=(0,u.Z)(p,a,s,!1,null,"202cb59e",null),h=d.exports},90309:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"meClass"},[t("div",[t("ConditionGroup",{attrs:{group:e.filterable},scopedSlots:e._u([{key:"default",fn:function(i){return[t("div",{staticClass:"condItem"},[t("PropCondition",{staticClass:"pading2",attrs:{favorites:e.favorites,eventProps:e.eventProps,userProps:e.userProps,userGroups:e.userGroups,userTags:e.userTags},on:{change:e.on_change_condition},model:{value:i.item.record,callback:function(t){e.$set(i.item,"record",t)},expression:"slotProps.item.record"}}),t("span",{on:{click:function(t){return e.on_click_add(e.filterable,i.item.id,i.item.level)}}},[t("el-tooltip",{attrs:{effect:"light",placement:"top",content:e.$t("message.添加条件")}},[t("b-icon",{staticClass:"condIcon",attrs:{icon:"filter-variant-plus",size:"is-small"}})],1)],1),!e.keepLast||e.groupItemCount(e.filterable)>1?t("span",{on:{click:function(t){return e.on_click_trash(e.filterable,i.item.id)}}},[t("el-tooltip",{attrs:{effect:"light",placement:"top",content:e.$t("message.删除条件")}},[t("b-icon",{staticClass:"condIcon",attrs:{icon:"trash-can-outline",size:"is-small"}})],1)],1):e._e()],1)]}}])})],1)])},s=[],r=i(97461),l=i(17818),n=i(794),o={components:{PropCondition:r.Z,ConditionGroup:l.Z},model:{prop:"filters",event:"filterschange"},props:{keepLast:{type:Boolean,default:!0},favorites:{type:String,default:"aa"},filters:{type:Object,default:function(){return{logicop:n.Z.def.LogicOp.LogicOpAnd,children:[{id:1,label:"label1",record:{pickersubject:{}}}]}}},eventProps:{type:Array,default:()=>[{value:"FAIL",label:"累计购买次数",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber},{value:"rank",label:"排名",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber},{value:"guild_name",label:"用户名字",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeString},{value:"guild_member",label:"年龄",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber},{value:"guild_leader",label:"性别",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeString},{value:"win",label:"胜利次数",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber}]},userProps:{type:Array,default:()=>[{value:"FAIL",label:"累计购买次数",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber},{value:"rank",label:"排名",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber},{value:"guild_name",label:"用户名字",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeString},{value:"guild_member",label:"年龄",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber},{value:"guild_leader",label:"性别",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeString},{value:"win",label:"胜利次数",label2:n.Z.def.PropertyType.getZhLabel(n.Z.def.PropertyType.PropertyTypeCustom),type:n.Z.def.DataType.DataTypeNumber}]},userGroups:{type:Array,default:()=>[]},userTags:{type:Array,default:()=>[]}},data(){return{selectedEvent:"",filterable:{}}},created(){this.filterable=this.filters},mounted(){},watch:{filters(e,t){n.Z.utils.Ignore(t),this.filterable.children=e.children,this.filterable.logicop=e.logicop},eventProps(e,t){n.Z.utils.Ignore(e,t)}},methods:{on_click_add(e,t,i){n.Z.condx.GroupAdd(e,t,i,{record:{pickersubject:{}}})},on_click_trash(e,t){n.Z.condx.GroupRemove(e,t)},onMetricChange(e,t,i,a){n.Z.utils.Ignore(e,t,i,a)},on_event_change(e){this.selectedEvent=e},on_change_condition(e){n.Z.utils.Ignore(e)},groupItemCount(e){return n.Z.condx.GroupItemCount(e)}}},c=o,p=i(1001),u=(0,p.Z)(c,a,s,!1,null,"b60fea14",null),d=u.exports},97773:function(e,t,i){var a={"./boxplot.svg":78676,"./boxplot2.svg":39006,"./chart-bar.svg":46980,"./chart-cumulative.svg":45413,"./chart-donut-variant.svg":64822,"./chart-line.svg":53481,"./chart-pie.svg":66097,"./chart-sankey.svg":7085,"./chart-scatter-plot.svg":46090,"./distribute-horizontal-center.svg":3543,"./flask-empty-outline.svg":34426,"./hexagon-slice-4.svg":19742,"./map.svg":76038,"./speedometer.svg":37751,"./table-large.svg":69793,"./vs.svg":21068,"./waves.svg":84530};function s(e){var t=r(e);return i(t)}function r(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=r,e.exports=s,s.id=97773},78676:function(e,t,i){"use strict";e.exports=i.p+"img/boxplot.830d642c.svg"},39006:function(e,t,i){"use strict";e.exports=i.p+"img/boxplot2.d70af34e.svg"},46980:function(e,t,i){"use strict";e.exports=i.p+"img/chart-bar.a27b4433.svg"},45413:function(e,t,i){"use strict";e.exports=i.p+"img/chart-cumulative.73aa0874.svg"},64822:function(e,t,i){"use strict";e.exports=i.p+"img/chart-donut-variant.7fc12b7c.svg"},53481:function(e,t,i){"use strict";e.exports=i.p+"img/chart-line.c84b9ae5.svg"},66097:function(e,t,i){"use strict";e.exports=i.p+"img/chart-pie.20b9dd18.svg"},7085:function(e,t,i){"use strict";e.exports=i.p+"img/chart-sankey.6afe618b.svg"},46090:function(e,t,i){"use strict";e.exports=i.p+"img/chart-scatter-plot.92c693bc.svg"},3543:function(e,t,i){"use strict";e.exports=i.p+"img/distribute-horizontal-center.f7df265f.svg"},34426:function(e,t,i){"use strict";e.exports=i.p+"img/flask-empty-outline.77e3be99.svg"},19742:function(e,t,i){"use strict";e.exports=i.p+"img/hexagon-slice-4.eec52121.svg"},76038:function(e,t,i){"use strict";e.exports=i.p+"img/map.07088126.svg"},37751:function(e,t,i){"use strict";e.exports=i.p+"img/speedometer.9e43f341.svg"},69793:function(e,t,i){"use strict";e.exports=i.p+"img/table-large.07f1ecc3.svg"},21068:function(e,t,i){"use strict";e.exports=i.p+"img/vs.cae95fd8.svg"},84530:function(e,t,i){"use strict";e.exports=i.p+"img/waves.25ac4130.svg"},99877:function(e,t,i){"use strict";i.d(t,{ZP:function(){return r}});const a={};function s(e){return Object.keys(e).reduce(((t,i)=>(!1!==e[i]&&null!==e[i]&&void 0!==e[i]&&(t[i]=e[i]),t)),{})}const r={name:"InlineSvg",inheritAttrs:!1,render(e){return this.svgElSource?e("svg",{on:this.$listeners,attrs:Object.assign(this.getSvgAttrs(this.svgElSource),s(this.$attrs)),domProps:{innerHTML:this.getSvgContent(this.svgElSource)}}):null},props:{src:{type:String,required:!0},title:{type:String},transformSource:{type:Function,default:e=>e},keepDuringLoading:{type:Boolean,default:!0}},data(){return{svgElSource:null}},watch:{src(e){this.getSource(e)}},mounted(){this.getSource(this.src)},methods:{getSvgAttrs(e){let t={};const i=e.attributes;if(!i)return t;for(let a=i.length-1;a>=0;a--)t[i[a].name]=i[a].value;return t},getSvgContent(e){return e=e.cloneNode(!0),e=this.transformSource(e),this.title&&l(e,this.title),e.innerHTML},getSource(e){a[e]||(a[e]=this.download(e)),this.svgElSource&&a[e].getIsPending()&&!this.keepDuringLoading&&(this.svgElSource=null,this.$emit("unloaded")),a[e].then((e=>{this.svgElSource=e,this.$nextTick((()=>{this.$emit("loaded",this.$el)}))})).catch((t=>{this.svgElSource&&(this.svgElSource=null,this.$emit("unloaded")),delete a[e],this.$emit("error",t)}))},download(e){return n(new Promise(((t,i)=>{const a=new XMLHttpRequest;a.open("GET",e,!0),a.onload=()=>{if(a.status>=200&&a.status<400)try{const e=new DOMParser,s=e.parseFromString(a.responseText,"text/xml");let r=s.getElementsByTagName("svg")[0];r?t(r):i(new Error('Loaded file is not valid SVG"'))}catch(e){i(e)}else i(new Error("Error loading SVG"))},a.onerror=i,a.send()})))}}};function l(e,t){const i=e.getElementsByTagName("title");if(i.length)i[0].textContent=t;else{const i=document.createElementNS("http://www.w3.org/2000/svg","title");i.textContent=t,e.insertBefore(i,e.firstChild)}}function n(e){if(e.getIsPending)return e;let t=!0,i=e.then((e=>(t=!1,e)),(e=>{throw t=!1,e}));return i.getIsPending=function(){return t},i}}}]);
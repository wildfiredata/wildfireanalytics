"use strict";(self["webpackChunkwildfire"]=self["webpackChunkwildfire"]||[]).push([[7094],{87094:function(e,t,s){s.r(t),s.d(t,{default:function(){return p}});var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"rootproject"},[t("div",{staticClass:"title"},[e._v(e._s(e.$t("message.许可证")))]),t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"380px"}},[t("el-form-item",{attrs:{label:e.$t("message.授权主体名字")+"："}},[t("div",[e._v(e._s(e.form.name))])]),t("el-form-item",{attrs:{label:e.$t("message.授权状态")+"："}},[t("div",[e._v(e._s(e.form.status))])]),t("el-form-item",{attrs:{label:e.$t("message.有效期至")+"："}},[t("div",[e._v(e._s(e.form.expire))])]),t("el-form-item",{attrs:{label:e.$t("message.授权码")+"："}},[e.formEditing.code?t("div",[t("el-input",{staticClass:"width300",model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}}),t("el-button",{staticClass:"ml15",attrs:{size:"small"},on:{click:e.confirmCode}},[e._v(e._s(e.$t("message.确定")))]),t("el-button",{attrs:{size:"small"},on:{click:function(t){return e.editClick()}}},[e._v(e._s(e.$t("message.取消")))])],1):t("div",[t("el-button",{staticClass:"changecode",attrs:{type:"text",size:"small"},on:{click:function(t){return e.editClick("code")}}},[e._v(e._s(e.$t("message.更改授权码")))])],1)])],1)],1)},r=[],o=s(63822),n=s(36797),m=s.n(n),a=s(794),l=s(47056),c={components:{},data(){return{form:{name:"",code:"",status:"",expire:""},formEdit:{name:"",code:"",status:"",expire:""},formEditing:{name:!1,code:!1,status:!1,expire:!1}}},mounted(){this.initialize()},methods:{...(0,o.nv)({setApp:"system/setApp"}),initialize(){this.QueryLicense()},reset(){this.form={name:"",code:"",status:""}},editClick(e){this.formEditing={name:!1,code:!1},e&&(this.formEdit=a.Z.utils.DeepClone(this.form),this.formEditing[e]=!0)},QueryLicense(){l.Z["new"]().getLicenseQuery().then(function({data:e}){return a.Z.utils.Ignore(e),this.setLicenseInfo(e),!0}.bind(this))},setLicenseInfo(e){a.Z.utils.Ignore(e),e&&(this.form.name=e.owner_name,this.form.status=a.Z.def.LicenseStatus.getZhLabel(e.status),e.expire_time>0?this.form.expire=m()(1e3*e.expire_time).format("YYYY-MM-DD HH:mm:ss")+"(UTC)":this.form.expire="")},confirmCode(){l.Z["new"]().getLicenseVerify({license_code:this.form.code}).then(function({data:e}){this.reset(),a.Z.utils.Ignore(e),this.setLicenseInfo(e),this.editClick(),this.$router.go(0)}.bind(this)).catch((e=>{this.reset(),a.Z.utils.Err(this,e),this.editClick()}))}},computed:{...(0,o.Se)({getCurrAppId:"system/getCurrAppId",getCurrAppName:"system/getCurrAppName",getCurrAppTimeZone:"system/getCurrAppTimeZone",getCurrAppRefreshTime:"system/getCurrAppRefreshTime"}),GetCurrZoneName:function(){return a.Z.def.TimeZone.getZhLabel(this.form.zone)}}},f=c,u=s(1001),d=(0,u.Z)(f,i,r,!1,null,"f86b2722",null),p=d.exports}}]);
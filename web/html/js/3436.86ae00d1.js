"use strict";(self["webpackChunkwildfire"]=self["webpackChunkwildfire"]||[]).push([[3436],{43436:function(e,t,i){i.d(t,{Z:function(){return v}});var s=function(){var e=this,t=e._self._c;return t("div",{ref:"me",attrs:{id:"crf_selectpicker"}},[t("el-input",{class:{inputDefaultClass:!0,inputPrefixIconClass:e.inputPrefixIcon,activeInput:e.viewshow},attrs:{size:e.fontSize,placeholder:e.inputPlaceHolder,"prefix-icon":e.inputPrefixIcon,"suffix-icon":e.inputSuffixIcon,readonly:""},on:{blur:e.input_onblur,focus:e.input_onfocus},model:{value:e.valueText,callback:function(t){e.valueText=t},expression:"valueText"}},[t("b-icon",{attrs:{icon:"account",size:"is-small"}})],1),t("el-input",{staticStyle:{position:"fixed",width:"2000px",transform:"translateY(-9999px)"},attrs:{size:e.fontSize,readonly:""}},[t("span",{ref:"autowidthspan",attrs:{slot:"prefix"},slot:"prefix"},[e._v(e._s(e.autowidthspanText))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.viewshow,expression:"viewshow"}],staticClass:"pickview1"},[t("el-input",{attrs:{clearable:!0,"prefix-icon":"el-icon-search",placeholder:e.$t("message.搜索")},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}),t("el-tabs",{staticClass:"tabsClass",model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.tabs,(function(i){return t("el-tab-pane",{key:i.tabName,attrs:{label:i.tabName,name:i.tabName}},[t("div",{staticClass:"tabContent"},e._l(i.groups,(function(s){return t("div",{key:s.group_name},[t("div",{staticClass:"dividerGroupClass"},[s.icon?t("b-icon",{staticStyle:{"margin-right":"5px"},attrs:{icon:s.icon,size:"is-small"}}):t("div",{staticClass:"square"}),e._v(" "+e._s(s.group_name)+" ")],1),t("ul",e._l(s.children,(function(l){return t("li",{key:l.id,on:{mouseleave:function(t){return e.leaveli()},mouseenter:function(t){return e.enterli(s.group_name,l)},click:function(t){return e.handleLiClick(l,s.group_name,s.value)}}},[t("div",{staticClass:"leftli"},[e._v(e._s(l.label)+" ")]),t("div",{staticClass:"rightli"},[t("div",{staticClass:"mini_label2"},[e._v(e._s(l.label2)+" ")]),t("div",{staticClass:"mini_label3"},[e._v(e._s(l.label3)+" ")]),e.favorites.length>0&&e.IsAllTab(i.tabName)?t("div",{on:{click:function(t){return t.stopPropagation(),e.clickIcon(l)}}},[t("b-icon",{class:{iconClass:!0,iconClassFavorite:l.is_favorite},attrs:{icon:"star-outline",size:"is-small"}})],1):e._e()])])})),0)])})),0)])})),1)],1),t("div",{class:{hintPopClass:!0,hintPopClassShow:e.isPopShow}},[t("div",{staticClass:"hintTitleClass"},[t("div",{staticClass:"hintTitleRowClass"},[t("span",{staticClass:"halfWithEllips"},[e._v(e._s(e.hintDescript.title))]),e.hintDescript.tag?t("b-tag",{attrs:{type:"is-info is-light",rounded:""}},[e._v(e._s(e.hintDescript.tag))]):e._e()],1),t("div",{staticClass:"hintTitlePropClass"},e._l(e.hintDescript.desc,(function(i,s){return t("span",{key:s,staticClass:"hintTitlePropItemClass",attrs:{rounded:""}},[e._v(e._s(i.label))])})),0)]),t("div",{staticClass:"hintMemoClass"},[e.hintDescript.memo?t("div",[e._v(e._s(e.hintDescript.memo))]):e.hintDescript.memoholder?t("div",{staticStyle:{color:"lightgray"}},[e._v(e._s(e.hintDescript.memoholder))]):e._e()]),t("div",{staticClass:"hintTailClass"},e._l(e.hintDescript.tail,(function(i,s){return t("span",{key:s,staticClass:"hintTailItemClass",on:{click:function(t){return e.hintTailItemClick(i)}}},[t("b-icon",{attrs:{icon:i.icon,size:"is-small"}}),e._v(e._s(i.label))],1)})),0)])],1)},l=[],a=(i(57658),i(794));const r="tree",n="list",o=380,h=320;var u={model:{prop:"pickvalue",event:"pickvaluechange"},name:"SelectPicker",props:{favorites:{type:String,default:"aa"},pickvalue:{type:Object,default:function(){return{}}},inputWidth:{type:String,default:"200px"},fixWidth:{type:Boolean,default:!1},hideHint:{type:Boolean,default:!1},defaulted:{type:Boolean,default:!0},fontSize:{type:String,default:"mini"},maxLabel2Width:{type:Number,default:1},maxLabel3Width:{type:Number,default:100},inputPlaceHolder:{type:String,default:""},inputPrefixIcon:{type:String,default:""},inputSuffixIcon:{type:String,default:""},selectobj:{type:Array,default:()=>[]},tabGroups:{type:Array,default:()=>[]},items:[{message:"Foo"},{message:"Bar"}],hintExample:{type:Object,default:function(){return{title:"",tag:"",memo:"",memoholder:"",desc:[{label:""}],tail:[{label:"",icon:"",herf:""}]}}},getItemHint:{type:Function,default(e,t){var i={desc:[],tail:[]};return i.title=t.label,i.tag=e,i.memo=t.memo,i.memoholder=t.memoholder,i.desc.push({label:t.name}),i.desc.push({label:t.label2}),i.desc.push({label:t.label3}),i.tail.push({label:t.label3,icon:t.prefix_icon}),i}},TimePick:Boolean},data(){return{ALL_TAB_NAME:this.$t("message.全部"),FAVORITE_GROUP_NAME:this.$t("message.收藏夹"),valueText:"",openTreePanel:!0,viewshow:!1,refreshTab:1,activeName:this.$t("message.全部"),hoveringli:!1,hintDescript:{title:"111",tag:"",memo:"",memoholder:this.$t("message.未填写备注信息"),desc:[],tail:[]},filterText:"",treeNodeLevel1Style:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:h/2+"px"},treeNodeLevel2Style:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:h/2+"px"},treeNodeLevelOtherStyle:{display:"block",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",width:h/2+"px"},treeNodelabel2Style:{minWidth:"20px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},treeNodelabel3Style:{minWidth:"21px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},created(){},mounted(){document.addEventListener("click",this.dc,!0);var e=this.$refs.me,t=e.getElementsByClassName("pickview1")[0];t.style.width=String(h)+"px",t.style.height=String(o)+"px",this.hintDescript=this.hintExample,this.getDefaultSelectValue(),this.setTreeNodellabelLeftStyel(),setTimeout((()=>this.autoWidthAdjust("mounted")),100)},beforeDestroy(){document.removeEventListener("click",this.dc,!0)},methods:{dc(e){var t=this.$refs.me;this.viewshow=t.contains(e.target),this.$emit("pickviewshow",this.viewshow),this.adjustPopPosition()},getDefaultSelectValue(){var e,t={children:a.Z.utils.DeepClone(this.tabGroups)};if(this.pickvalue&&!a.Z.utils.IsEmptyStr(this.pickvalue.label))this.valueText=this.pickvalue.label;else if(this.pickvalue&&this.pickvalue.value){for(var i=0;i<t.children.length;i++)if(t.children[i].children&&t.children[i].children.length>0){for(var s=0;s<t.children[i].children.length;s++)if(t.children[i].children[s].value===this.pickvalue.value)return e=t.children[i].children[s],void this.confirm(e,!0)}else if(t.children[i].value===this.pickvalue.value)return e=t.children[i],void this.confirm(e,!0)}else if(this.defaulted){while(t.children&&t.children.length>0)e=t.children[0],t=t.children[0];e&&(this.valueText=e.label,this.confirm(e,!0))}},input_onfocus(){this.viewshow=!0,this.$emit("pickviewshow",this.viewshow),this.adjustPopPosition()},input_onblur(){this.adjustPopPosition()},adjustPopPosition(){var e=this.$refs.me,t=e.getElementsByClassName("inputDefaultClass")[0],i=e.getElementsByClassName("pickview1")[0],s={};this.viewshow?(s.height=o,s.width=h):(s.height=0,s.width=0),window.innerHeight-t.getBoundingClientRect().top>o+32?s.top=t.getBoundingClientRect().height+5:s.top=-o-5,window.innerWidth-t.getBoundingClientRect().left>h?s.left="0px":s.left="calc("+t.style.width+" - "+String(h)+"px)",i.style.height=String(s.height)+"px",i.style.width=String(s.width)+"px",i.style.left=s.left,i.style.top=String(s.top)+"px";var l=e.getElementsByClassName("hintPopClass")[0];l.style.width=String(s.width)+"px",l.style.left=String(s.width)+"px",l.style.top=String(s.top)+"px"},clickIcon(e){var t=this.$store.getters["favorite/GetFavoriteMap"](this.favorites);"undefined"!==t.get(e.value)?this.$store.dispatch("favorite/DeleteFavorite",{group:this.favorites,value:e.value}):this.$store.dispatch("favorite/PushFavorite",{group:this.favorites,item:e}),this.openTreePanel=!1,setTimeout((()=>{this.openTreePanel=!0}),10),this.refreshTab=this.refreshTab+1},IsAllTab(e){return e===this.ALL_TAB_NAME},setTreeNodellabelLeftStyel(){var e=h;this.tabs.hasLevel2&&(e-=this.maxLabel2Width,this.treeNodelabel2Style.minWidth=this.maxLabel2Width+"px"),this.tabs.hasLevel3&&(e-=this.maxLabel3Width,this.treeNodelabel3Style.minWidth="55px"),this.treeNodeLevel1Style.width=String(e-200)+"px",this.treeNodeLevel2Style.width=String(e-220)+"px",this.treeNodeLevelOtherStyle.width=String(e-280)+"px"},traversalTree(e,t){if(!e||e.children&&0!==e.children.length)for(var i=0;i<e.children.length;i++)this.traversalTree(e.children[i],t);else t(e)},filterGroups(e,t){var i=[];if(a.Z.utils.IsEmptyStr(this.filterText))return e;for(var s=0;s<e.length;s++){var l=[],o={};e[s].type===n?(l=e[s].children.filter((function(e){return e.label.indexOf(t)>-1})),l.length>0&&(o={group_name:e[s].group_name+"["+String(l.length)+"]",value:e[s].value,type:n,icon:e[s].icon},o.children=l,i.push(o))):e[s].type===r&&(this.traversalTree(e[s],(function(e){(a.Z.utils.IsEmptyStr(t)||e.label.indexOf(t)>-1)&&l.push(e)})),console.log("filteredChildren",l),l.length>0&&(o={group_name:e[s].group_name+"["+String(l.length)+"]",value:e[s].value,type:n,icon:e[s].icon},o.children=l,i.push(o)))}return i},updateHintObject(e,t){this.hintDescript=this.getItemHint(e,t)},enterli(e,t){this.hoveringli=!0,this.updateHintObject(e,t)},leaveli(){this.hoveringli=!1},hintTailItemClick(e){console.log("hintTailItemClick",e)},confirm(e,t){this.viewshow=!1,this.valueText=e.label,this.$emit("change",e,t),this.$emit("pickvaluechange",e),this.$emit("pickviewshow",this.viewshow),setTimeout((()=>this.autoWidthAdjust("confirm")),100)},handleLiClick(e,t,i){var s=[],l=[];s.push(i,e.value),l.push(t,e.label),this.confirm(e)},handleNodeClick(e,t,i,s){var l=[],a=[];if(e&&e.isLeaf){while(e)0===e.level?(a.push(i),l.push(s)):(a.push(e.data.label),l.push(e.data.value)),e=e.parent;a=a.reverse(),l=l.reverse(),this.confirm(t)}},autoWidthAdjust(e){if(a.Z.utils.Ignore(e),this.$refs.autowidthspan){var t=this.$refs.autowidthspan.getClientRects(),i=this.$refs.me,s=i.getElementsByClassName("inputDefaultClass")[0];if(t.length>0){var l=t[0].width+12;a.Z.utils.IsEmptyStr(this.inputPrefixIcon)||(l+=25),a.Z.utils.IsEmptyStr(this.inputSuffixIcon)||(l+=25),l+=20,s.style.width=l+"px"}}}},watch:{tabGroups(){setTimeout((()=>{this.getDefaultSelectValue()}),10)}},computed:{autowidthspanText:function(){return this.valueText&&this.valueText.length>0?this.valueText:this.inputPlaceHolder},isPopShow:function(){return!this.hideHint&&this.viewshow&&(!a.Z.utils.IsEmptyStr(this.hintDescript.title)||!a.Z.utils.IsEmptyStr(this.hintDescript.tag))},tabs:function(){var e=[],t={tabName:this.ALL_TAB_NAME,groups:[]},i=new Map;if(!a.Z.utils.IsEmptyStr(this.favorites)){i=this.$store.getters["favorite/GetFavoriteMap"](this.favorites);var s=this.$store.getters["favorite/ListFavorite"](this.favorites);t.groups.push({group_name:this.FAVORITE_GROUP_NAME,value:"",type:n,icon:"account-details",children:s})}t.groups.push(...this.tabGroups);for(var l=0;l<t.groups.length;l++)for(var o=0;o<t.groups[l].children.length;o++)t.groups[l].type===n?"undefined"!==i.get(t.groups[l].children[o].value)?t.groups[l].children[o].is_favorite=!0:t.groups[l].children[o].is_favorite=!1:t.groups[l].type===r&&this.traversalTree(t.groups[l],(function(e){e&&"undefined"!==i.get(e.value)?e.is_favorite=!0:e.is_favorite=!1}));for(t.groups=this.filterGroups(t.groups,this.filterText),e.push(t),l=0;l<this.tabGroups.length;l++)e.push({tabName:this.tabGroups[l].group_name,groups:this.filterGroups([this.tabGroups[l]],this.filterText)});for(l=0;l<e.length;l++)for(e[l].hasLevel=!0,o=0;o<e[l].groups.length;o++)for(var h=0;h<e[l].groups[o].children.length;h++)a.Z.utils.IsEmptyStr(e[l].groups[o].children[h].label2)&&(e[l].hasLevel2=!0),a.Z.utils.IsEmptyStr(e[l].groups[o].children[h].label3)&&(e[l].hasLevel3=!0);return a.Z.utils.Ignore(this.refreshTab),e},test:function(){return!0}}},c=u,p=i(1001),d=(0,p.Z)(c,s,l,!1,null,"fe21a8bc",null),v=d.exports}}]);
"use strict";(self["webpackChunkwildfire"]=self["webpackChunkwildfire"]||[]).push([[9693],{36546:function(e,t,r){r.r(t),r.d(t,{default:function(){return b}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"root"},[t("div",{staticClass:"title"},[e._v(e._s(e.$t("message.用户详查")))]),t("div",{staticClass:"workerea"},[t("splitpanes",{staticClass:"default-theme"},[t("pane",{attrs:{size:e.paneSize,"min-size":"0","max-size":"40"}},[t("div",{staticClass:"searcherea"},[t("div",{staticClass:"searchconditions"},[t("PropConditionGroup",{attrs:{keepLast:!0,eventProps:[],userProps:e.UserPropList,filters:e.userfilter}})],1),t("div",{staticClass:"searchbuttons"},[t("el-button",{staticClass:"ml10",attrs:{size:"small",type:"primary"},on:{click:e.queryUsers}},[e._v(e._s(e.$t("message.查询")))]),t("el-button",{staticClass:"ml10",attrs:{disabled:e.userfilter.children&&e.userfilter.children.length>5,size:"small",type:"primary"},on:{click:function(t){return e.AddCond(e.userfilter)}}},[e._v(e._s(e.$t("message.添加条件")))])],1)])]),t("pane",{attrs:{size:100-e.paneSize}},[t("div",{staticClass:"UsersListErea"},[e.refresh?e._e():t("UserListEventTrack",{attrs:{UserList:e.UserList}})],1)])],1)],1)])},o=[],s=(r(57658),r(30541),r(83581)),l=r(794),i=r(62147),n=r(47056),p=r(54085),c=r(90309),d=r(63822);const u=r(36797);var f={components:{PropConditionGroup:c.Z,Splitpanes:s.F,Pane:s.X,UserListEventTrack:p.Z},data(){return{userfilter:{logicop:l.Z.def.LogicOp.LogicOpAnd,children:[{selectedOp:"=",record:{}}]},UserPropList:[],paneSize:30,form:{timerange:"2023-06-08→2023-06-18",eventClusive:[this.$t("message.全部")],include:!0,deduplicatedEvent:[]},zone:l.Z.def.TimeZone.Utcp8,UserList:{data:[],columns:[]},refresh:!1}},mounted(){this.initialize()},methods:{initialize(){this.form.timerange=u().add(-1,"day").format("YYYY-MM-DD HH:mm:ss")+l.Z.def.TimeRangeJoint+u().format("YYYY-MM-DD HH:mm:ss");var e=this.getCurrAppId(),t=i.Z.api.LoadUserProp(e),r=Promise.all([t]);r.then((e=>{this.UserPropList=e[0]})).catch((e=>{l.Z.utils.Err(this,e)}))},AddCond(e){l.Z.condx.GroupAdd(e,0,1,{selectedOp:"=",record:{}})},queryUsers(){n.Z["new"]().queryUserDetail({app:this.getCurrAppId(),time_zone:this.zone,filter:i.Z.metric.VuePropFilterGroup2ApiPropFilterCombo(this.userfilter)}).then(function(e){l.Z.utils.Ignore(e),console.log("response",e),e.data.Rows||(e.data.Rows=[]);var t,r=[],a=[];e.data.Rows.forEach((t=>{for(var a={},o=0;o<e.data.columns.length;o++)a[e.data.columns[o].column_name]=t[o];r.push(a)}));for(var o=0;o<e.data.columns.length;o++)e.data.columns[o].field=e.data.columns[o].column_name,e.data.columns[o].index=o,e.data.columns[o].column_name==l.Z.def.UserColUserId&&(t=e.data.columns[o]),a.push(e.data.columns[o]);t&&(a.splice(t.index,1),a.unshift(t)),this.refresh=!0,setTimeout((()=>{this.UserList={columns:a,data:r},this.refresh=!1}),100)}.bind(this)).catch(function(e){l.Z.utils.Err(this,e)}.bind(this))}},computed:{...(0,d.Se)({getCurrAppId:"system/getCurrAppId"})}},y=f,g=r(1001),m=(0,g.Z)(y,a,o,!1,null,"f3f7cdc0",null),b=m.exports},17818:function(e,t,r){r.d(t,{Z:function(){return c}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"meClass"},[e.topgroup.children&&e.topgroup.children.length>0?t("div",{staticClass:"grouproot"},[t("div",{staticClass:"group-header"},[e.topgroup.children.length>1?t("div",{staticClass:"logic-buttons"},[t("div",{class:{spanAnd:!0,logicOn:e.topgroup.logicop===e.pub.def.LogicOp.LogicOpAnd},on:{click:function(t){e.topgroup.logicop=e.pub.def.LogicOp.LogicOpAnd}}},[e._v(e._s(e.$t("message.且"))),t("span")]),t("div",{class:{spanOr:!0,logicOn:e.topgroup.logicop===e.pub.def.LogicOp.LogicOpOr},on:{click:function(t){e.topgroup.logicop=e.pub.def.LogicOp.LogicOpOr}}},[e._v(e._s(e.$t("message.或"))),t("span")])]):e._e()]),t("div",{staticClass:"condContainer"},e._l(e.topgroup.children,(function(r,a){return t("div",{key:r.id},[r.children&&r.children.length>0?t("div",{staticClass:"grouproot"},[t("div",{staticClass:"group-header"},[r.children.length>1?t("div",{staticClass:"logic-buttons"},[t("div",{class:{spanAnd:!0,logicOn:r.logicop===e.pub.def.LogicOp.LogicOpAnd},on:{click:function(t){r.logicop=e.pub.def.LogicOp.LogicOpAnd}}},[e._v(e._s(e.$t("message.且"))),t("span")]),t("div",{class:{spanOr:!0,logicOn:r.logicop===e.pub.def.LogicOp.LogicOpOr},on:{click:function(t){r.logicop=e.pub.def.LogicOp.LogicOpOr}}},[e._v(e._s(e.$t("message.或"))),t("span")])]):e._e()]),t("div",{staticClass:"condContainer"},e._l(e.topgroup.children[a].children,(function(o,s){return t("div",{key:o.id},[e._t("default",(function(){return[e._v(e._s(r)+" "+e._s(s))]}),{item:o,parent:e.topgroup.children[a]})],2)})),0)]):t("div",[e._t("default",(function(){return[e._v(e._s(r))]}),{item:r,parent:e.topgroup})],2)])})),0)]):e._e()])},o=[],s=r(794),l={components:{},props:{keepLast:{type:Boolean,default:!0},group:{type:Object,default:function(){return{logicop:s.Z.def.LogicOp.LogicOpAnd,children:[{id:1,label:"label1",name:"namelabel1"},{id:2,label:"label2",name:"namelabel2"},{id:3,label:"label3",name:"namelabel3",logicop:s.Z.def.LogicOp.LogicOpAnd,children:[{id:3,label:"label1",name:"namelabel1"},{id:2,label:"label2",name:"namelabel2"}]}]}}},subjects:{type:Array,default:()=>[]}},data(){return{topgroup:{}}},created(){this.topgroup=this.group},mounted(){},methods:{},computed:{}},i=l,n=r(1001),p=(0,n.Z)(i,a,o,!1,null,"c6cbd6c8",null),c=p.exports},90309:function(e,t,r){r.d(t,{Z:function(){return u}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"meClass"},[t("div",[t("ConditionGroup",{attrs:{group:e.filterable},scopedSlots:e._u([{key:"default",fn:function(r){return[t("div",{staticClass:"condItem"},[t("PropCondition",{staticClass:"pading2",attrs:{favorites:e.favorites,eventProps:e.eventProps,userProps:e.userProps,userGroups:e.userGroups,userTags:e.userTags},on:{change:e.on_change_condition},model:{value:r.item.record,callback:function(t){e.$set(r.item,"record",t)},expression:"slotProps.item.record"}}),t("span",{on:{click:function(t){return e.on_click_add(e.filterable,r.item.id,r.item.level)}}},[t("el-tooltip",{attrs:{effect:"light",placement:"top",content:e.$t("message.添加条件")}},[t("b-icon",{staticClass:"condIcon",attrs:{icon:"filter-variant-plus",size:"is-small"}})],1)],1),!e.keepLast||e.groupItemCount(e.filterable)>1?t("span",{on:{click:function(t){return e.on_click_trash(e.filterable,r.item.id)}}},[t("el-tooltip",{attrs:{effect:"light",placement:"top",content:e.$t("message.删除条件")}},[t("b-icon",{staticClass:"condIcon",attrs:{icon:"trash-can-outline",size:"is-small"}})],1)],1):e._e()],1)]}}])})],1)])},o=[],s=r(97461),l=r(17818),i=r(794),n={components:{PropCondition:s.Z,ConditionGroup:l.Z},model:{prop:"filters",event:"filterschange"},props:{keepLast:{type:Boolean,default:!0},favorites:{type:String,default:"aa"},filters:{type:Object,default:function(){return{logicop:i.Z.def.LogicOp.LogicOpAnd,children:[{id:1,label:"label1",record:{pickersubject:{}}}]}}},eventProps:{type:Array,default:()=>[{value:"FAIL",label:"累计购买次数",label2:i.Z.def.PropertyType.getZhLabel(i.Z.def.PropertyType.PropertyTypeCustom),type:i.Z.def.DataType.DataTypeNumber},{value:"rank",label:"排名",label2:i.Z.def.PropertyType.getZhLabel(i.Z.def.PropertyType.PropertyTypeCustom),type:i.Z.def.DataType.DataTypeNumber},{value:"guild_name",label:"用户名字",label2:i.Z.def.PropertyType.getZhLabel(i.Z.def.PropertyType.PropertyTypeCustom),type:i.Z.def.DataType.DataTypeString},{value:"guild_member",label:"年龄",label2:i.Z.def.PropertyType.getZhLabel(i.Z.def.PropertyType.PropertyTypeCustom),type:i.Z.def.DataType.DataTypeNumber},{value:"guild_leader",label:"性别",label2:i.Z.def.PropertyType.getZhLabel(i.Z.def.PropertyType.PropertyTypeCustom),type:i.Z.def.DataType.DataTypeString},{value:"win",label:"胜利次数",label2:i.Z.def.PropertyType.getZhLabel(i.Z.def.PropertyType.PropertyTypeCustom),type:i.Z.def.DataType.DataTypeNumber}]},userProps:{type:Array,default:()=>[{value:"FAIL",label:"累计购买次数",label2:i.Z.def.PropertyType.getZhLabel(i.Z.def.PropertyType.PropertyTypeCustom),type:i.Z.def.DataType.DataTypeNumber},{value:"rank",label:"排名",label2:i.Z.def.PropertyType.getZhLabel(i.Z.def.PropertyType.PropertyTypeCustom),type:i.Z.def.DataType.DataTypeNumber},{value:"guild_name",label:"用户名字",label2:i.Z.def.PropertyType.getZhLabel(i.Z.def.PropertyType.PropertyTypeCustom),type:i.Z.def.DataType.DataTypeString},{value:"guild_member",label:"年龄",label2:i.Z.def.PropertyType.getZhLabel(i.Z.def.PropertyType.PropertyTypeCustom),type:i.Z.def.DataType.DataTypeNumber},{value:"guild_leader",label:"性别",label2:i.Z.def.PropertyType.getZhLabel(i.Z.def.PropertyType.PropertyTypeCustom),type:i.Z.def.DataType.DataTypeString},{value:"win",label:"胜利次数",label2:i.Z.def.PropertyType.getZhLabel(i.Z.def.PropertyType.PropertyTypeCustom),type:i.Z.def.DataType.DataTypeNumber}]},userGroups:{type:Array,default:()=>[]},userTags:{type:Array,default:()=>[]}},data(){return{selectedEvent:"",filterable:{}}},created(){this.filterable=this.filters},mounted(){},watch:{filters(e,t){i.Z.utils.Ignore(t),this.filterable.children=e.children,this.filterable.logicop=e.logicop},eventProps(e,t){i.Z.utils.Ignore(e,t)}},methods:{on_click_add(e,t,r){i.Z.condx.GroupAdd(e,t,r,{record:{pickersubject:{}}})},on_click_trash(e,t){i.Z.condx.GroupRemove(e,t)},onMetricChange(e,t,r,a){i.Z.utils.Ignore(e,t,r,a)},on_event_change(e){this.selectedEvent=e},on_change_condition(e){i.Z.utils.Ignore(e)},groupItemCount(e){return i.Z.condx.GroupItemCount(e)}}},p=n,c=r(1001),d=(0,c.Z)(p,a,o,!1,null,"b60fea14",null),u=d.exports}}]);
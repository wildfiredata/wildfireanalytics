"use strict";(self["webpackChunkwildfire"]=self["webpackChunkwildfire"]||[]).push([[6144],{36144:function(e,t,i){i.d(t,{Z:function(){return _}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"meClass"},[e.is_empty_tabledata||!e.enableSummary&&!e.enableTranspose?e._e():t("div",{staticClass:"table_toolbar"},[t("div",{}),t("div",{staticClass:"rowRightCenter"},[e.tableData.data&&e.tableData.data.length>5?t("b-select",{staticClass:"ml10",attrs:{size:"is-small"},model:{value:e.pageSize,callback:function(t){e.pageSize=t},expression:"pageSize"}},e._l(e.pageTypeOptions,(function(i){return t("option",{key:i.value,domProps:{value:i.value}},[e._v(" "+e._s(i.label)+" ")])})),0):e._e(),e.enableSummary?t("el-select",{staticClass:"wt100 ml10",attrs:{placeholder:e.$t("message.选择汇总"),size:"mini"},on:{change:e.on_change_summary},model:{value:e.summaryValue,callback:function(t){e.summaryValue=t},expression:"summaryValue"}},e._l(e.summaryColTypeOptions,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1):e._e(),e.tableData.sql_timegrain_dim_field&&e.enableTranspose?t("el-button",{staticClass:"ml10",attrs:{size:"mini"},on:{click:e.transposeTableData}},[e._v(e._s(e.$t("message.转置")))]):e._e()],1)]),t("b-table",{ref:"multiSortTable",staticClass:"mytable",attrs:{data:e.tableData.data,paginated:e.tableData.data&&e.tableData.data.length>5,"per-page":e.pageSize,"pagination-size":"is-small","backend-sorting":!0,"sort-multiple":!0,"sort-multiple-data":e.sortingPriority,narrowed:e.narrow,scrollable:e.scrollable},on:{sort:e.sortPressed},scopedSlots:e._u([{key:"bottom-left",fn:function(){return[!e.enableTranspose&&!e.enableSummary&&e.tableData.data&&e.tableData.data.length>5?t("b-select",{staticClass:"ml10",attrs:{size:"is-small"},model:{value:e.pageSize,callback:function(t){e.pageSize=t},expression:"pageSize"}},e._l(e.pageTypeOptions,(function(i){return t("option",{key:i.value,domProps:{value:i.value}},[e._v(" "+e._s(i.label)+" ")])})),0):e._e()]},proxy:!0},{key:"empty",fn:function(){return[t("div",{staticClass:"has-text-centered"},[e._v("No records")])]},proxy:!0}])},e._l(e.tableData.columns,(function(i,a){return t("b-table-column",{key:a,attrs:{sortable:"",meta:i.label,field:i.field,visible:i.visible},scopedSlots:e._u([{key:"header",fn:function({column:i}){return[t("div",{class:{mediumSize:e.narrow}},[t("span",[e._v(e._s(i.meta))]),e.isSortCol(i.field)?t("b-icon",{class:{sortarrow:e.isDescCol(i.field)},attrs:{icon:"arrow-up",size:"is-small"}}):e._e(),t("span",{staticClass:"sortsubscript"},[e._v(e._s(e.getIndexSort(i.field)))])],1)]}},{key:"default",fn:function(a){return[e._t(i.field,(function(){return[t("div",{staticClass:"rowRightCenter"},[t("CellPlus",{attrs:{value:a.row[i.field],heightSize:e.getHeight,percentPosition:i.percent_position,showPercent:i.showPercent,enablePercentBackground:i.enable_percent_background,align:i.align,arrayDisplay:i.array_display,displayType:i.display_type,modifier:i.modifier}}),i.suffixicon?t("div",{on:{click:function(t){return e.on_click_suffixicon(a.row,i.field)}}},[t("b-icon",{staticClass:"ml3 curhand",attrs:{icon:i.suffixicon,size:"is-small"}})],1):e._e()],1)]}),{row:a.row})]}}],null,!0)})})),1)],1)},r=[],s=(i(57658),i(794)),l=i(62147),o=function(){var e=this,t=e._self._c;return t("div",{ref:"me",class:{CellPlusRoot:!0,aligncontentright:"right"==e.align,aligncontentleft:"left"==e.align,aligncontentcenter:"center"==e.align,padding8_4_8_12:"medium"==e.myHight,padding4_2_4_6:"small"==e.myHight,vsHeight:"medium"==e.myHight},style:{backgroundColor:e.percentBackGround}},[e.hasValue2?t("div",{class:{BuefyValueCell:!0,BuefyValueCellArray:e.hasValue2}},[t("div",{class:{borderBottom:e.isValue1Longer,titleSize:e.isTitle,mediumSize:e.isMedium,smallSize:e.isSmall,miniSize:e.isMini,warningBorder:e.isInvalid}},[e._v(" "+e._s(e.growthTopText)+" ")]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.hasValue2,expression:"hasValue2"}],class:{borderTop:e.isValue2Longer,titleSize:e.isTitle,mediumSize:e.isMedium,smallSize:e.isSmall,miniSize:e.isMini,warningBorder:e.isInvalid}},[e._v(" "+e._s(e.growthBottomText)+" ")])]):t("div",[t("span",[e._v(e._s(e.growthTopText))])]),e.hasValue2&&e.ValidShowPercent&&"bottom"!=e.percentPosition&&"top"!=e.percentPosition?t("div",{staticClass:"BuefyValueGrowth",class:{growPositive:e.rateCompare>0,growNegtive:e.rateCompare<0}},[e._v(" "+e._s(e.growthRateText)+" ")]):e._e(),e.autoWidth?t("el-input",{staticStyle:{position:"fixed",width:"2000px",transform:"translateY(-9999px)"},attrs:{size:e.fontSize,readonly:""}},[t("span",{ref:"autowidthspan",class:{titleSize:e.isTitle},attrs:{slot:"prefix"},slot:"prefix"},[e._v(e._s(e.autowidthspanText))])]):e._e()],1)},n=[],u=i(58362),h=i(26602),d=i.n(h),p=i(36797),m=i.n(p),c=i(59172),f=i.n(c),y={props:{value:{type:[String,Number,Object,Array]},emptyHolderValue:{String:String,default:"-"},isInvalid:{type:Boolean,default:!1},showPercent:{type:String,default:""},enablePercentBackground:{type:Boolean,default:!0},percentPosition:{type:String,default:""},arrayDisplay:{type:String,default:""},modifier:{type:String,default:""},displayType:{type:String,default:""},align:{type:String,default:"right"},heightSize:{type:String,default:"medium"},fontSize:{type:String,default:"medium"},autoWidth:{type:Boolean,default:!1}},data(){return{valueText1:"",valueText2:"",value1:"",value2:"",myHight:"medium",hasValue2:!0}},watch:{value(e){this.calcValueText(e),this.autoWidthAdjust()}},created(){this.calcValueText(this.value)},mounted(){this.autoWidthAdjust()},methods:{calcValueText(e){if(this.arrayDisplay==s.Z.def.ArrayDisplay.ArrayDisplayFirst)this.hasValue2=!1,d()(e)?this.value1=e[0]:this.value1=e,this.valueText1=this.valuePutHolder(this.value1);else if(this.arrayDisplay==s.Z.def.ArrayDisplay.ArrayDisplayVertical)this.hasValue2=!0,d()(e)?(this.value1=e[0],this.valueText1=this.valuePutHolder(this.value1),this.value2=e[1],this.valueText2=this.valuePutHolder(this.value2)):(this.value1=e,this.valueText1=this.valuePutHolder(this.value1),this.valueText2=this.valuePutHolder(""));else if(this.arrayDisplay==s.Z.def.ArrayDisplay.ArrayDisplayHorizontal)if(this.hasValue2=!1,d()(e)){for(var t=[],i=0;i<e.length;i++)t.push(String(this.valuePutHolder(e[i])));this.value1=e,this.valueText1=t.join(",")}else this.value1=e,this.valueText1=this.valuePutHolder(this.value1);else this.hasValue2=!1,d()(e)&&e.length>1?(this.value1=e[0],this.valueText1=this.valuePutHolder(this.value1),this.value2=e[1],this.valueText2=this.valuePutHolder(this.value2),this.hasValue2=!0):d()(e)?(this.value1=e[0],this.valueText1=this.valuePutHolder(this.value1)):(this.value1=e,this.valueText1=this.valuePutHolder(this.value1));this.hasValue2?this.myHight="mini":this.myHight=this.heightSize},valuePutHolder(e){if(s.Z.utils.IsEmptyStr(e))return this.emptyHolderValue;var t=e;return this.modifier==s.Z.def.ModifierType.ModifierTypeRound?t=Math.round(Number(e)):this.modifier==s.Z.def.ModifierType.ModifierTypePercent?t=String(Math.round(100*Number(e)))+"%":this.modifier==s.Z.def.ModifierType.ModifierTypePercent2?t=String(Math.round(1e4*Number(e))/100)+"%":this.modifier==s.Z.def.ModifierType.ModifierTypeRound2?t=Math.round(100*Number(e))/100:this.modifier==s.Z.def.ModifierType.ModifierTypeRound3?t=Math.round(1e3*Number(e))/1e3:s.Z.utils.IsEmptyStr(this.displayType)||s.Z.utils.IsEmptyStr(this.modifier)||(this.displayType==s.Z.def.DisplayType.DisplayTypeNumber?t="0,0"==this.modifier?f()(Number(e)).format({thousandSeparated:!0,mantissa:0}):f()(Number(e)).format(this.modifier):this.displayType==s.Z.def.DisplayType.DisplayTypeDatetime&&(m()(e).isValid()?(t=m()(e).format(this.modifier),this.modifier.indexOf("(do)")>=0&&"cn"==u.Z.locale&&(t=t.replace("0th","日"),t=t.replace("1st","一"),t=t.replace("2nd","二"),t=t.replace("3rd","三"),t=t.replace("4th","四"),t=t.replace("5th","五"),t=t.replace("6th","六"))):t=e)),t},autoWidthAdjust(e){this.autoWidth&&(s.Z.utils.Ignore(e),setTimeout((()=>{if(this.$refs.autowidthspan){var e=this.$refs.autowidthspan.getClientRects(),t=this.$refs.me,i=t.getElementsByClassName("BuefyValueCell")[0];if(e.length>0){var a=e[0].width+12;s.Z.utils.IsEmptyStr(this.inputPrefixIcon)||(a+=25),s.Z.utils.IsEmptyStr(this.inputSuffixIcon)||(a+=25),i.style.width=a+"px"}}}),10))},isValidNumber(e){var t=Number(e);return!Number.isNaN(t)}},computed:{ValidShowPercent:function(){return this.showPercent==s.Z.def.ShowPercent.ShowPercentGrowth||this.showPercent==s.Z.def.ShowPercent.ShowPercentPercent||this.showPercent==s.Z.def.ShowPercent.ShowPercentPercentNegtive||this.showPercent==s.Z.def.ShowPercent.ShowPercentPercentComplement||this.showPercent==s.Z.def.ShowPercent.ShowPercentPercentComplementNegative},isValue1Longer:function(){return!!(this.hasValue2&&s.Z.utils.ParseStrSafe(this.growthTopText).length>=s.Z.utils.ParseStrSafe(this.growthBottomText).length)},isValue2Longer:function(){return!!(this.hasValue2&&s.Z.utils.ParseStrSafe(this.growthTopText).length<s.Z.utils.ParseStrSafe(this.growthBottomText).length)},autowidthspanText:function(){return this.autoWidth?s.Z.utils.ParseStrSafe(this.growthTopText).length>s.Z.utils.ParseStrSafe(this.growthBottomText).length?this.growthTopText:this.growthBottomText:""},rateCompare(){return"-"!=this.growthRateText?Number(this.growthRateText.replaceAll("%","")):0},growthTopText:function(){return this.ValidShowPercent&&this.percentPosition==s.Z.def.PercentPosition.PercentPositionTop?this.growthRateText:this.valueText1},growthBottomText:function(){return this.ValidShowPercent&&this.percentPosition==s.Z.def.PercentPosition.PercentPositionBottom?this.growthRateText:this.valueText2},growthRateText:function(){if(this.isValidNumber(this.value1)&&this.isValidNumber(this.value2)){var e=Number(this.value1),t=Number(this.value2),i=e/t;return"growth"==this.showPercent?i=(e-t)/t:"percent"==this.showPercent?i=e/t:"npercent"==this.showPercent?i=-i:"1-percent"==this.showPercent?i=1-i:"n1-percent"==this.showPercent&&(i=-(1-i)),i=Math.round(100*i),isFinite(i)?i>0?`${i}%`:0==i?"0%":`${i}%`:"-"}return"-"},percentBackGround:function(){if(this.enablePercentBackground){if(this.ValidShowPercent){var e=this.rateCompare;if(0==e)return"#FFFFFF";e=Math.max(0,e),e=Math.min(100,e);var t=Math.floor(181*(100-e)/100)+64,i=Math.floor(92*(100-e)/100)+158,a=255;return"rgb("+t+","+i+","+a+")"}return"#FFFFFF"}return"#FFFFFF"},isMedium(){return"medium"==s.Z.utils.UnifiedElementFontSize(this.fontSize)},isSmall(){return"small"==s.Z.utils.UnifiedElementFontSize(this.fontSize)},isMini(){return"mini"==s.Z.utils.UnifiedElementFontSize(this.fontSize)},isTitle(){return"title"==this.fontSize}}},g=y,v=i(1001),S=(0,v.Z)(g,o,n,!1,null,"4670fd82",null),b=S.exports,P={components:{CellPlus:b},model:{prop:"tableData",event:"tableDatachange"},props:{tableData:{type:Object},fontSize:{type:String,default:"medium"},heightSize:{type:String,default:"medium"},defaultPageSize:{type:Number,default:10},narrow:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},scrollable:{type:Boolean,default:!0},enableTranspose:{type:Boolean,default:!1},enableSummary:{type:Boolean,default:!1}},data(){return{pageTypeOptions:[],pageSize:10,currentPage:1,sortingPriority:[],summaryValue:s.Z.def.SummaryColType.SummaryColTypeNone,summaryColTypeOptions:[]}},created(){this.initialize()},mounted(){},methods:{initialize(){this.pageSize=this.defaultPageSize,this.pageTypeOptions=s.Z.def.PageSizeType.getLabelValueList(),this.summaryColTypeOptions=s.Z.def.SummaryColType.getLabelValueList(),this.on_change_summary(this.summaryValue)},sortPressed(e,t){var i;s.Z.utils.Ignore(e,t);var a=0;for(a=0;a<this.sortingPriority.length;a++)if(this.sortingPriority[a].field==e){i=this.sortingPriority[a];break}if(i)"desc"===i.order?this.sortingPriority.splice(a,1):i.order="desc";else{t="asc";var r="";this.tableData.columns.forEach((t=>{t.field==e&&(r=t.sort_type)})),this.sortingPriority.push({field:e,sort_type:r,order:t})}this.sortTableData()},sortTableData(){for(var e=[],t=[],i=[],a=0;a<this.sortingPriority.length;a++)e.push(this.sortingPriority[a].field),t.push(this.sortingPriority[a].sort_type),"desc"==this.sortingPriority[a].order?i.push(!0):i.push(!1);s.Z.utils.SortObjArrayByFieldList(this.tableData.data,e,t,i)},on_click_suffixicon(e,t){this.$emit("clicksuffix",e,t)},isSortCol(e){for(var t=0;t<this.sortingPriority.length;t++)if(this.sortingPriority[t].field==e)return!0;return!1},isDescCol(e){for(var t=0;t<this.sortingPriority.length;t++)if(this.sortingPriority[t].field===e&&"desc"===this.sortingPriority[t].order)return!0;return!1},getIndexSort(e){for(var t=0;t<this.sortingPriority.length;t++)if(this.sortingPriority[t].field==e)return t+1;return""},on_change_summary(e){l.Z.queryset.RemoveSummaryTableData(this.tableData),e!=s.Z.def.SummaryColType.SummaryColTypeNone&&l.Z.queryset.AddSummaryTableData(this.tableData,e)},transposeTableData(){if(this.summaryValue="",l.Z.queryset.RemoveSummaryTableData(this.tableData),this.tableData.data&&this.tableData.data.length>0){this.sortingPriority=[];var e=l.Z.queryset.TransposeTableData(this.tableData);this.$emit("tableDatachange",e)}}},computed:{getHeight(){return this.narrow?"mini":this.heightSize},is_empty_tabledata(){return s.Z.utils.IsEmptyObj(this.tableData)}}},T=P,w=(0,v.Z)(T,a,r,!1,null,"c0f0cce8",null),_=w.exports}}]);